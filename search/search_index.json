{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Streaklet","text":"<p>A self-hosted, Dockerized daily streak tracker for maintaining consistent habits.</p>"},{"location":"#overview","title":"Overview","text":"<p>Streaklet is a habit tracking application designed for families and personal use. It features multi-user profile support with completely isolated data, optional Fitbit integration for automatic task completion, and a mobile-first Progressive Web App experience.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Multi-User Profiles - Support for multiple users with completely isolated data</li> <li>Fitbit Integration - Automatic task completion based on Fitbit metrics (steps, sleep, heart rate)</li> <li>Progressive Web App (PWA) - Install on mobile devices for native app-like experience</li> <li>Offline Support - Service worker caching for offline functionality</li> <li>Mobile-First Design - Optimized daily checklist interface</li> <li>Automatic Streak Tracking - Tracks consecutive completed days</li> <li>Customizable Tasks - Required/optional task flags</li> <li>Timezone-Aware - Accurate daily tracking across timezones</li> <li>Calendar History - Visual completion calendar with stats</li> <li>Backup &amp; Restore - Export and import profile data</li> <li>Persistent SQLite Database - Simple, file-based storage</li> <li>No Authentication Required - Perfect for families on trusted networks</li> </ul>"},{"location":"#tech-stack","title":"Tech Stack","text":"<ul> <li>Backend: Python 3.12, FastAPI, SQLAlchemy 2.0</li> <li>Database: SQLite with Alembic migrations</li> <li>Frontend: Jinja2 templates, Alpine.js, HTMX</li> <li>Deployment: Docker, Docker Compose</li> <li>Testing: pytest with coverage</li> <li>CI/CD: GitHub Actions with automated releases</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Installation Guide - Get started with Docker</li> <li>Fitbit Integration - Connect your Fitbit device</li> <li>API Reference - REST API documentation</li> <li>Contributing Guide - Help improve Streaklet</li> </ul>"},{"location":"#screenshots","title":"Screenshots","text":"<p>Coming soon</p>"},{"location":"#license","title":"License","text":"<p>MIT License - See LICENSE</p>"},{"location":"api/endpoints/","title":"API Endpoints","text":"<p>Streaklet provides a REST API for programmatic access.</p>"},{"location":"api/endpoints/#profile-context","title":"Profile Context","text":"<p>All endpoints (except <code>/api/profiles</code>) accept an optional <code>X-Profile-Id</code> header to specify which profile's data to access.</p> <p>If not provided, defaults to profile ID 1.</p> <pre><code># Default (profile 1)\ncurl http://localhost:8080/api/tasks\n\n# Specific profile\ncurl -H \"X-Profile-Id: 2\" http://localhost:8080/api/tasks\n</code></pre>"},{"location":"api/endpoints/#profile-management","title":"Profile Management","text":""},{"location":"api/endpoints/#list-profiles","title":"List Profiles","text":"<pre><code>GET /api/profiles\n</code></pre> <p>Response: <pre><code>[\n  {\n    \"id\": 1,\n    \"name\": \"John\",\n    \"color\": \"#3b82f6\",\n    \"created_at\": \"2025-01-01T00:00:00Z\"\n  }\n]\n</code></pre></p>"},{"location":"api/endpoints/#get-profile","title":"Get Profile","text":"<pre><code>GET /api/profiles/{id}\n</code></pre>"},{"location":"api/endpoints/#create-profile","title":"Create Profile","text":"<pre><code>POST /api/profiles\nContent-Type: application/json\n\n{\n  \"name\": \"Jane\",\n  \"color\": \"#ef4444\"\n}\n</code></pre>"},{"location":"api/endpoints/#update-profile","title":"Update Profile","text":"<pre><code>PUT /api/profiles/{id}\nContent-Type: application/json\n\n{\n  \"name\": \"Jane Doe\",\n  \"color\": \"#10b981\"\n}\n</code></pre>"},{"location":"api/endpoints/#delete-profile","title":"Delete Profile","text":"<pre><code>DELETE /api/profiles/{id}\n</code></pre>"},{"location":"api/endpoints/#tasks","title":"Tasks","text":""},{"location":"api/endpoints/#list-tasks","title":"List Tasks","text":"<pre><code>GET /api/tasks\nX-Profile-Id: 1\n</code></pre> <p>Response: <pre><code>[\n  {\n    \"id\": 1,\n    \"title\": \"Exercise 30 minutes\",\n    \"is_required\": true,\n    \"is_active\": true,\n    \"sort_order\": 1,\n    \"fitbit_metric_type\": \"active_minutes\",\n    \"fitbit_goal_value\": 30.0,\n    \"fitbit_goal_operator\": \"gte\",\n    \"fitbit_auto_check\": true\n  }\n]\n</code></pre></p>"},{"location":"api/endpoints/#create-task","title":"Create Task","text":"<pre><code>POST /api/tasks\nX-Profile-Id: 1\nContent-Type: application/json\n\n{\n  \"title\": \"Read 10 pages\",\n  \"is_required\": true,\n  \"is_active\": true,\n  \"sort_order\": 1\n}\n</code></pre>"},{"location":"api/endpoints/#update-task","title":"Update Task","text":"<pre><code>PUT /api/tasks/{id}\nX-Profile-Id: 1\nContent-Type: application/json\n\n{\n  \"title\": \"Read 20 pages\",\n  \"is_required\": false\n}\n</code></pre>"},{"location":"api/endpoints/#delete-task","title":"Delete Task","text":"<pre><code>DELETE /api/tasks/{id}\nX-Profile-Id: 1\n</code></pre>"},{"location":"api/endpoints/#daily-checklist","title":"Daily Checklist","text":""},{"location":"api/endpoints/#get-todays-checklist","title":"Get Today's Checklist","text":"<pre><code>GET /api/days/today\nX-Profile-Id: 1\n</code></pre> <p>Response: <pre><code>{\n  \"date\": \"2025-01-15\",\n  \"tasks\": [\n    {\n      \"id\": 1,\n      \"title\": \"Exercise 30 minutes\",\n      \"checked\": true,\n      \"checked_at\": \"2025-01-15T10:30:00Z\",\n      \"is_required\": true,\n      \"fitbit_current_value\": 35.0,\n      \"fitbit_goal_met\": true\n    }\n  ],\n  \"all_required_complete\": false,\n  \"completed_at\": null,\n  \"streak\": {\n    \"current_streak\": 5,\n    \"today_complete\": false,\n    \"last_completed_date\": \"2025-01-14\"\n  }\n}\n</code></pre></p>"},{"location":"api/endpoints/#toggle-task-check","title":"Toggle Task Check","text":"<pre><code>PUT /api/days/{date}/checks/{task_id}\nX-Profile-Id: 1\nContent-Type: application/json\n\n{\n  \"checked\": true\n}\n</code></pre>"},{"location":"api/endpoints/#streaks","title":"Streaks","text":""},{"location":"api/endpoints/#get-streak-info","title":"Get Streak Info","text":"<pre><code>GET /api/streak\nX-Profile-Id: 1\n</code></pre> <p>Response: <pre><code>{\n  \"current_streak\": 7,\n  \"today_complete\": true,\n  \"last_completed_date\": \"2025-01-15\"\n}\n</code></pre></p>"},{"location":"api/endpoints/#history","title":"History","text":""},{"location":"api/endpoints/#get-calendar-month","title":"Get Calendar Month","text":"<pre><code>GET /api/history/{year}/{month}\nX-Profile-Id: 1\n</code></pre> <p>Example: <pre><code>GET /api/history/2025/1\n</code></pre></p> <p>Response: <pre><code>{\n  \"calendar_data\": {\n    \"year\": 2025,\n    \"month\": 1,\n    \"days_in_month\": 31,\n    \"first_day_weekday\": 2,\n    \"days\": {\n      \"2025-01-15\": {\n        \"date\": \"2025-01-15\",\n        \"completed\": true,\n        \"completed_at\": \"2025-01-15T22:00:00Z\",\n        \"completion_rate\": 100\n      }\n    }\n  },\n  \"streak\": {\n    \"current_streak\": 7,\n    \"today_complete\": true,\n    \"last_completed_date\": \"2025-01-15\"\n  }\n}\n</code></pre></p>"},{"location":"api/endpoints/#backup-import","title":"Backup &amp; Import","text":""},{"location":"api/endpoints/#export-profile","title":"Export Profile","text":"<pre><code>GET /api/profiles/{id}/export\n</code></pre> <p>Downloads JSON file with profile data.</p>"},{"location":"api/endpoints/#import-profile","title":"Import Profile","text":"<pre><code>POST /api/profiles/{id}/import\nContent-Type: multipart/form-data\n\nfile: backup.json\nmode: replace  # or \"merge\"\n</code></pre>"},{"location":"api/endpoints/#export-all-profiles","title":"Export All Profiles","text":"<pre><code>GET /api/profiles/export/all\n</code></pre>"},{"location":"api/endpoints/#import-all-profiles","title":"Import All Profiles","text":"<pre><code>POST /api/profiles/import/all\nContent-Type: multipart/form-data\n\nfile: all_profiles.json\nmode: replace  # or \"merge\"\n</code></pre>"},{"location":"api/endpoints/#fitbit-integration","title":"Fitbit Integration","text":""},{"location":"api/endpoints/#check-connection","title":"Check Connection","text":"<pre><code>GET /api/fitbit/connection\nX-Profile-Id: 1\n</code></pre>"},{"location":"api/endpoints/#get-auth-url","title":"Get Auth URL","text":"<pre><code>GET /api/fitbit/auth\nX-Profile-Id: 1\n</code></pre>"},{"location":"api/endpoints/#disconnect","title":"Disconnect","text":"<pre><code>POST /api/fitbit/disconnect\nX-Profile-Id: 1\n</code></pre>"},{"location":"api/endpoints/#manual-sync","title":"Manual Sync","text":"<pre><code>POST /api/fitbit/sync\nX-Profile-Id: 1\n</code></pre>"},{"location":"api/endpoints/#get-daily-summary","title":"Get Daily Summary","text":"<pre><code>GET /api/fitbit/daily-summary?date=2025-01-15\nX-Profile-Id: 1\n</code></pre>"},{"location":"api/endpoints/#health-check","title":"Health Check","text":"<pre><code>GET /health\n</code></pre> <p>Response: <pre><code>{\"status\": \"healthy\"}\n</code></pre></p>"},{"location":"api/endpoints/#rate-limiting","title":"Rate Limiting","text":"<p>No rate limiting is currently implemented. Use responsibly.</p>"},{"location":"api/endpoints/#error-responses","title":"Error Responses","text":"<p>Errors follow this format:</p> <pre><code>{\n  \"detail\": \"Error message description\"\n}\n</code></pre> <p>Common status codes: - <code>200</code> - Success - <code>201</code> - Created - <code>400</code> - Bad Request - <code>404</code> - Not Found - <code>500</code> - Internal Server Error</p>"},{"location":"api/overview/","title":"API Overview","text":"<p>Streaklet provides a REST API for programmatic access to all features.</p>"},{"location":"api/overview/#base-url","title":"Base URL","text":"<pre><code>http://localhost:8080/api\n</code></pre>"},{"location":"api/overview/#authentication","title":"Authentication","text":"<p>Streaklet does not require authentication. It's designed for use on trusted networks.</p> <p>Security Note: Do not expose Streaklet directly to the internet without additional authentication layers.</p>"},{"location":"api/overview/#profile-context","title":"Profile Context","text":"<p>Most endpoints require a profile context via the <code>X-Profile-Id</code> header:</p> <pre><code>curl -H \"X-Profile-Id: 1\" http://localhost:8080/api/tasks\n</code></pre> <p>If omitted, defaults to profile ID 1.</p>"},{"location":"api/overview/#response-format","title":"Response Format","text":"<p>All responses are JSON.</p> <p>Success Response: <pre><code>{\n  \"id\": 1,\n  \"name\": \"value\"\n}\n</code></pre></p> <p>Error Response: <pre><code>{\n  \"detail\": \"Error message\"\n}\n</code></pre></p>"},{"location":"api/overview/#endpoint-categories","title":"Endpoint Categories","text":"<ul> <li>Profile Management - Create, list, update profiles</li> <li>Tasks - Manage tasks for profiles</li> <li>Daily Checklist - Get today's tasks and toggle completion</li> <li>Streaks - Get streak information</li> <li>History - Access calendar and completion history</li> <li>Backup &amp; Import - Export and import profile data</li> <li>Fitbit - Fitbit OAuth and sync</li> </ul>"},{"location":"api/overview/#complete-api-reference","title":"Complete API Reference","text":"<p>See Endpoints Documentation for full API reference with examples.</p>"},{"location":"api/overview/#client-libraries","title":"Client Libraries","text":"<p>Currently no official client libraries exist. The API is simple REST - use any HTTP client.</p> <p>Example with Python: <pre><code>import requests\n\nresponse = requests.get(\n    \"http://localhost:8080/api/tasks\",\n    headers={\"X-Profile-Id\": \"1\"}\n)\ntasks = response.json()\n</code></pre></p> <p>Example with JavaScript: <pre><code>const response = await fetch('http://localhost:8080/api/tasks', {\n  headers: { 'X-Profile-Id': '1' }\n});\nconst tasks = await response.json();\n</code></pre></p>"},{"location":"api/overview/#rate-limiting","title":"Rate Limiting","text":"<p>No rate limiting is currently implemented.</p>"},{"location":"api/overview/#versioning","title":"Versioning","text":"<p>The API is not versioned. Changes will be backwards compatible where possible, with breaking changes noted in release notes.</p>"},{"location":"deployment/docker-compose/","title":"Docker Compose Deployment","text":"<p>Deploy Streaklet using Docker Compose for easy management and configuration.</p>"},{"location":"deployment/docker-compose/#quick-start","title":"Quick Start","text":""},{"location":"deployment/docker-compose/#1-create-docker-composeyml","title":"1. Create docker-compose.yml","text":"<pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    container_name: streaklet\n    restart: unless-stopped\n    ports:\n      - \"8080:8080\"\n    volumes:\n      - ./data:/data\n    environment:\n      - APP_TIMEZONE=America/Chicago\n      - DB_PATH=/data/app.db\n      # Optional: Fitbit integration\n      # - FITBIT_CLIENT_ID=your_client_id\n      # - FITBIT_CLIENT_SECRET=your_client_secret\n      # - APP_SECRET_KEY=your_random_32_char_secret\n</code></pre>"},{"location":"deployment/docker-compose/#2-prepare-data-directory","title":"2. Prepare Data Directory","text":"<p>The Docker image runs as non-root user (uid 1000) for security:</p> <pre><code>mkdir -p data\nchown -R 1000:1000 data\n</code></pre>"},{"location":"deployment/docker-compose/#3-start-the-container","title":"3. Start the Container","text":"<pre><code>docker compose up -d\n</code></pre>"},{"location":"deployment/docker-compose/#4-access-the-application","title":"4. Access the Application","text":"<p>Open your browser to: <code>http://localhost:8080</code></p>"},{"location":"deployment/docker-compose/#configuration","title":"Configuration","text":""},{"location":"deployment/docker-compose/#environment-variables","title":"Environment Variables","text":"Variable Required Default Description <code>APP_TIMEZONE</code> No <code>America/Chicago</code> IANA timezone for daily tracking <code>DB_PATH</code> No <code>/data/app.db</code> SQLite database file path <code>PORT</code> No <code>8080</code> Application port <code>FITBIT_CLIENT_ID</code> No - Fitbit OAuth client ID <code>FITBIT_CLIENT_SECRET</code> No - Fitbit OAuth client secret <code>APP_SECRET_KEY</code> No* - Secret key for token encryption <p>* Required if using Fitbit integration</p>"},{"location":"deployment/docker-compose/#timezone-configuration","title":"Timezone Configuration","text":"<p>Set your local timezone for accurate daily tracking:</p> <pre><code>environment:\n  - APP_TIMEZONE=America/New_York\n</code></pre> <p>Common timezones: - <code>America/New_York</code> - Eastern Time - <code>America/Chicago</code> - Central Time - <code>America/Denver</code> - Mountain Time - <code>America/Los_Angeles</code> - Pacific Time - <code>Europe/London</code> - UK - <code>Europe/Paris</code> - Central European Time - <code>Asia/Tokyo</code> - Japan</p> <p>Full list of IANA timezones</p>"},{"location":"deployment/docker-compose/#fitbit-integration","title":"Fitbit Integration","text":"<p>To enable Fitbit integration, add all three environment variables:</p> <pre><code>environment:\n  - FITBIT_CLIENT_ID=ABC123\n  - FITBIT_CLIENT_SECRET=xyz789secretkey\n  - APP_SECRET_KEY=your_secure_random_32_character_string\n</code></pre> <p>Important: Keep <code>APP_SECRET_KEY</code> consistent. Changing it will invalidate all encrypted Fitbit tokens.</p> <p>Generate a secure key: <pre><code>openssl rand -hex 32\n</code></pre></p>"},{"location":"deployment/docker-compose/#storage","title":"Storage","text":""},{"location":"deployment/docker-compose/#volume-mounts","title":"Volume Mounts","text":"<p>Streaklet stores all data in <code>/data</code> inside the container. Mount this directory to persist data:</p> <pre><code>volumes:\n  - ./data:/data           # Host directory\n  # Or use a named volume:\n  # - streaklet-data:/data\n</code></pre>"},{"location":"deployment/docker-compose/#named-volumes","title":"Named Volumes","text":"<p>For named volumes, define at the bottom of docker-compose.yml:</p> <pre><code>services:\n  streaklet:\n    # ... configuration ...\n    volumes:\n      - streaklet-data:/data\n\nvolumes:\n  streaklet-data:\n</code></pre> <p>List volumes: <pre><code>docker volume ls\n</code></pre></p> <p>Inspect volume location: <pre><code>docker volume inspect streaklet-data\n</code></pre></p>"},{"location":"deployment/docker-compose/#permissions","title":"Permissions","text":"<p>The container runs as <code>appuser</code> (uid 1000, gid 1000). Ensure the data directory is writable:</p> <pre><code># If using host directory\nchown -R 1000:1000 ./data\n\n# Verify permissions\nls -la ./data\n</code></pre>"},{"location":"deployment/docker-compose/#networking","title":"Networking","text":""},{"location":"deployment/docker-compose/#port-mapping","title":"Port Mapping","text":"<p>Change the host port:</p> <pre><code>ports:\n  - \"3000:8080\"  # Access at http://localhost:3000\n</code></pre>"},{"location":"deployment/docker-compose/#reverse-proxy","title":"Reverse Proxy","text":"<p>For production use with reverse proxy (nginx, Traefik, Caddy):</p> <pre><code>services:\n  streaklet:\n    # ... other config ...\n    expose:\n      - \"8080\"  # Don't publish ports directly\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.streaklet.rule=Host(`streaklet.example.com`)\"\n</code></pre> <p>See Homelab Integration for reverse proxy examples.</p>"},{"location":"deployment/docker-compose/#updates","title":"Updates","text":""},{"location":"deployment/docker-compose/#pulling-updates","title":"Pulling Updates","text":"<pre><code>docker compose pull\ndocker compose up -d\n</code></pre> <p>This pulls the latest image and recreates the container.</p>"},{"location":"deployment/docker-compose/#viewing-logs","title":"Viewing Logs","text":"<pre><code># Follow logs in real-time\ndocker compose logs -f\n\n# View last 100 lines\ndocker compose logs --tail=100\n\n# View logs for specific time range\ndocker compose logs --since=1h\n</code></pre>"},{"location":"deployment/docker-compose/#restarting","title":"Restarting","text":"<pre><code># Restart the service\ndocker compose restart\n\n# Stop and start (recreates containers)\ndocker compose down\ndocker compose up -d\n</code></pre>"},{"location":"deployment/docker-compose/#backup","title":"Backup","text":""},{"location":"deployment/docker-compose/#database-backup","title":"Database Backup","text":"<p>Recommended: Use the built-in backup API (see Backup &amp; Restore)</p> <p>Alternative: Copy the SQLite database directly:</p> <pre><code># Stop the container first\ndocker compose stop\n\n# Copy database\ncp ./data/app.db ./backups/app-$(date +%Y-%m-%d).db\n\n# Start the container\ndocker compose start\n</code></pre>"},{"location":"deployment/docker-compose/#automated-backups","title":"Automated Backups","text":"<p>Add a backup service to docker-compose.yml:</p> <pre><code>services:\n  streaklet:\n    # ... streaklet config ...\n\n  backup:\n    image: alpine:latest\n    container_name: streaklet-backup\n    volumes:\n      - ./data:/data:ro  # Read-only\n      - ./backups:/backups\n    command: |\n      sh -c \"\n      while true; do\n        cp /data/app.db /backups/app-\\$(date +%Y-%m-%d).db\n        sleep 86400  # Daily\n      done\n      \"\n</code></pre>"},{"location":"deployment/docker-compose/#health-checks","title":"Health Checks","text":"<p>Docker Compose health check:</p> <pre><code>services:\n  streaklet:\n    # ... other config ...\n    healthcheck:\n      test: [\"CMD\", \"python\", \"-c\", \"import urllib.request; urllib.request.urlopen('http://localhost:8080/health')\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n</code></pre> <p>Check health status: <pre><code>docker compose ps\n</code></pre></p>"},{"location":"deployment/docker-compose/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/docker-compose/#container-wont-start","title":"Container won't start","text":"<p>Check logs: <pre><code>docker compose logs\n</code></pre></p> <p>Common issues: - Permission denied: Run <code>chown -R 1000:1000 ./data</code> - Port already in use: Change port mapping or stop conflicting service - Invalid environment variable: Check <code>.env</code> file syntax</p>"},{"location":"deployment/docker-compose/#cannot-write-to-database","title":"Cannot write to database","text":"<p>Ensure data directory is writable by uid 1000: <pre><code>sudo chown -R 1000:1000 ./data\n</code></pre></p>"},{"location":"deployment/docker-compose/#fitbit-connection-fails","title":"Fitbit connection fails","text":"<p>Verify environment variables are set: <pre><code>docker compose exec streaklet env | grep FITBIT\n</code></pre></p> <p>Check callback URL in Fitbit app settings matches: <pre><code>http://your-domain:8080/api/fitbit/callback\n</code></pre></p>"},{"location":"deployment/docker-compose/#container-keeps-restarting","title":"Container keeps restarting","text":"<p>View restart count: <pre><code>docker compose ps\n</code></pre></p> <p>Check logs for error messages: <pre><code>docker compose logs --tail=50\n</code></pre></p> <p>Common causes: - Database corruption (restore from backup) - Filesystem issues (check disk space: <code>df -h</code>) - Invalid configuration</p>"},{"location":"deployment/docker-compose/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"deployment/docker-compose/#resource-limits","title":"Resource Limits","text":"<p>Limit CPU and memory usage:</p> <pre><code>services:\n  streaklet:\n    # ... other config ...\n    deploy:\n      resources:\n        limits:\n          cpus: '0.5'\n          memory: 512M\n        reservations:\n          memory: 256M\n</code></pre>"},{"location":"deployment/docker-compose/#custom-network","title":"Custom Network","text":"<p>Create isolated network:</p> <pre><code>networks:\n  streaklet-net:\n    driver: bridge\n\nservices:\n  streaklet:\n    networks:\n      - streaklet-net\n</code></pre>"},{"location":"deployment/docker-compose/#read-only-root-filesystem","title":"Read-Only Root Filesystem","text":"<p>For extra security:</p> <pre><code>services:\n  streaklet:\n    # ... other config ...\n    read_only: true\n    tmpfs:\n      - /tmp\n</code></pre>"},{"location":"deployment/docker-compose/#complete-example","title":"Complete Example","text":"<p>Full-featured docker-compose.yml:</p> <pre><code>version: '3.8'\n\nservices:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    container_name: streaklet\n    restart: unless-stopped\n    ports:\n      - \"8080:8080\"\n    volumes:\n      - streaklet-data:/data\n    environment:\n      - APP_TIMEZONE=America/Chicago\n      - DB_PATH=/data/app.db\n      - FITBIT_CLIENT_ID=${FITBIT_CLIENT_ID}\n      - FITBIT_CLIENT_SECRET=${FITBIT_CLIENT_SECRET}\n      - APP_SECRET_KEY=${APP_SECRET_KEY}\n    healthcheck:\n      test: [\"CMD\", \"python\", \"-c\", \"import urllib.request; urllib.request.urlopen('http://localhost:8080/health')\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n    deploy:\n      resources:\n        limits:\n          cpus: '0.5'\n          memory: 512M\n    labels:\n      - \"com.example.description=Streaklet habit tracker\"\n      - \"com.example.version=1.0\"\n\nvolumes:\n  streaklet-data:\n    driver: local\n\nnetworks:\n  default:\n    driver: bridge\n</code></pre> <p>With <code>.env</code> file: <pre><code>FITBIT_CLIENT_ID=your_client_id\nFITBIT_CLIENT_SECRET=your_secret\nAPP_SECRET_KEY=your_secure_random_key_32_chars_min\n</code></pre></p>"},{"location":"deployment/docker-compose/#next-steps","title":"Next Steps","text":"<ul> <li>Homelab Integration - Integrate with reverse proxies and home servers</li> <li>Configuration Guide - Detailed configuration options</li> <li>Backup &amp; Restore - Data backup strategies</li> </ul>"},{"location":"deployment/homelab/","title":"Homelab Integration","text":"<p>Deploy Streaklet in your homelab environment with reverse proxy, SSL, and monitoring.</p>"},{"location":"deployment/homelab/#overview","title":"Overview","text":"<p>This guide covers:</p> <ul> <li>Reverse proxy configuration (nginx, Traefik, Caddy)</li> <li>SSL/TLS certificates</li> <li>Domain setup</li> <li>Integration with existing homelab stacks</li> <li>Monitoring and logging</li> </ul>"},{"location":"deployment/homelab/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose installed</li> <li>Domain name (or local DNS)</li> <li>Reverse proxy running (or ready to set up)</li> </ul>"},{"location":"deployment/homelab/#reverse-proxy-integration","title":"Reverse Proxy Integration","text":""},{"location":"deployment/homelab/#nginx-proxy-manager","title":"nginx Proxy Manager","text":"<p>Popular GUI-based reverse proxy for homelabs.</p> <p>1. Deploy Streaklet without port publishing:</p> <pre><code># docker-compose.yml\nservices:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    container_name: streaklet\n    restart: unless-stopped\n    networks:\n      - proxy-network\n    volumes:\n      - ./data:/data\n    environment:\n      - APP_TIMEZONE=America/Chicago\n\nnetworks:\n  proxy-network:\n    external: true\n</code></pre> <p>2. Configure in nginx Proxy Manager:</p> <ul> <li>Domain Names: <code>streaklet.yourdomain.com</code></li> <li>Scheme: <code>http</code></li> <li>Forward Hostname: <code>streaklet</code> (container name)</li> <li>Forward Port: <code>8080</code></li> <li>Cache Assets: Enabled</li> <li>Block Common Exploits: Enabled</li> <li>Websockets Support: Enabled (for future features)</li> <li>SSL: Request Let's Encrypt certificate</li> </ul>"},{"location":"deployment/homelab/#traefik","title":"Traefik","text":"<p>Docker-native reverse proxy with automatic service discovery.</p> <pre><code># docker-compose.yml\nservices:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    container_name: streaklet\n    restart: unless-stopped\n    networks:\n      - traefik\n    volumes:\n      - ./data:/data\n    environment:\n      - APP_TIMEZONE=America/Chicago\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.streaklet.rule=Host(`streaklet.yourdomain.com`)\"\n      - \"traefik.http.routers.streaklet.entrypoints=websecure\"\n      - \"traefik.http.routers.streaklet.tls=true\"\n      - \"traefik.http.routers.streaklet.tls.certresolver=letsencrypt\"\n      - \"traefik.http.services.streaklet.loadbalancer.server.port=8080\"\n\nnetworks:\n  traefik:\n    external: true\n</code></pre>"},{"location":"deployment/homelab/#caddy","title":"Caddy","text":"<p>Automatic HTTPS reverse proxy with simple configuration.</p> <p>Caddyfile: <pre><code>streaklet.yourdomain.com {\n    reverse_proxy streaklet:8080\n    encode gzip\n}\n</code></pre></p> <p>docker-compose.yml: <pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    container_name: streaklet\n    restart: unless-stopped\n    networks:\n      - caddy\n    volumes:\n      - ./data:/data\n    environment:\n      - APP_TIMEZONE=America/Chicago\n\nnetworks:\n  caddy:\n    external: true\n</code></pre></p>"},{"location":"deployment/homelab/#nginx-manual-configuration","title":"nginx (manual configuration)","text":"<p>nginx.conf: <pre><code>server {\n    listen 80;\n    server_name streaklet.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name streaklet.yourdomain.com;\n\n    ssl_certificate /etc/letsencrypt/live/streaklet.yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/streaklet.yourdomain.com/privkey.pem;\n\n    location / {\n        proxy_pass http://streaklet:8080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # For PWA and service workers\n        proxy_set_header Cache-Control \"no-cache\";\n\n        # WebSocket support (future-proofing)\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n</code></pre></p>"},{"location":"deployment/homelab/#dns-configuration","title":"DNS Configuration","text":""},{"location":"deployment/homelab/#internal-dns-home-network-only","title":"Internal DNS (Home Network Only)","text":"<p>Option 1: Router DNS Override - Access router admin panel - Add custom DNS entry: <code>streaklet.local</code> \u2192 <code>192.168.1.100</code></p> <p>Option 2: Pi-hole <pre><code># /etc/pihole/custom.list\n192.168.1.100 streaklet.local\n</code></pre></p> <p>Option 3: /etc/hosts (per-device) <pre><code>192.168.1.100 streaklet.local\n</code></pre></p>"},{"location":"deployment/homelab/#public-dns-external-access","title":"Public DNS (External Access)","text":"<p>Create an A record pointing to your public IP: <pre><code>Type: A\nName: streaklet\nValue: your.public.ip.address\nTTL: 3600\n</code></pre></p> <p>Then set up port forwarding on your router: <code>443 \u2192 192.168.1.100:443</code></p> <p>Security Warning: Exposing Streaklet publicly requires additional security measures. See Security Considerations below.</p>"},{"location":"deployment/homelab/#ssltls-certificates","title":"SSL/TLS Certificates","text":""},{"location":"deployment/homelab/#lets-encrypt-recommended","title":"Let's Encrypt (Recommended)","text":"<p>With nginx Proxy Manager: - Built-in Let's Encrypt support - Auto-renewal - GUI-based setup</p> <p>With Certbot: <pre><code>certbot certonly --standalone -d streaklet.yourdomain.com\n</code></pre></p> <p>With Caddy: - Automatic HTTPS by default - No manual certificate management needed</p> <p>With Traefik: - Configure cert resolver in Traefik config - Automatic certificate issuance and renewal</p>"},{"location":"deployment/homelab/#self-signed-internal-use-only","title":"Self-Signed (Internal Use Only)","text":"<p>Generate self-signed certificate: <pre><code>openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n  -keyout streaklet.key \\\n  -out streaklet.crt \\\n  -subj \"/CN=streaklet.local\"\n</code></pre></p> <p>Note: Browsers will show security warnings. Only use for internal testing.</p>"},{"location":"deployment/homelab/#network-configuration","title":"Network Configuration","text":""},{"location":"deployment/homelab/#internal-access-only","title":"Internal Access Only","text":"<p>Docker Compose with no port publishing: <pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    # No ports: section\n    networks:\n      - internal\n    volumes:\n      - ./data:/data\n\nnetworks:\n  internal:\n    internal: true  # No external access\n</code></pre></p> <p>Access only through reverse proxy on the same network.</p>"},{"location":"deployment/homelab/#tailscalewireguard","title":"Tailscale/Wireguard","text":"<p>Secure remote access via VPN:</p> <p>1. Install Tailscale on server <pre><code>curl -fsSL https://tailscale.com/install.sh | sh\ntailscale up\n</code></pre></p> <p>2. Deploy Streaklet on internal network <pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    ports:\n      - \"8080:8080\"  # Only accessible via Tailscale\n    volumes:\n      - ./data:/data\n</code></pre></p> <p>3. Access via Tailscale IP <pre><code>http://100.x.x.x:8080\n</code></pre></p>"},{"location":"deployment/homelab/#monitoring","title":"Monitoring","text":""},{"location":"deployment/homelab/#health-checks","title":"Health Checks","text":"<p>Streaklet provides a health endpoint: <code>GET /health</code></p> <p>Monitor with Uptime Kuma: <pre><code>Monitor Type: HTTP(s)\nURL: https://streaklet.yourdomain.com/health\nInterval: 60 seconds\n</code></pre></p> <p>Monitor with Healthchecks.io: <pre><code># Add to crontab\n*/5 * * * * curl -fsS https://streaklet.yourdomain.com/health | curl -fsS --retry 3 https://hc-ping.com/your-check-uuid &gt; /dev/null\n</code></pre></p>"},{"location":"deployment/homelab/#logging","title":"Logging","text":"<p>View logs: <pre><code>docker compose logs -f streaklet\n</code></pre></p> <p>Send logs to external system (Loki, Graylog, etc.): <pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    logging:\n      driver: \"json-file\"\n      options:\n        max-size: \"10m\"\n        max-file: \"3\"\n</code></pre></p> <p>Integration with Promtail (for Loki): <pre><code>services:\n  promtail:\n    image: grafana/promtail:latest\n    volumes:\n      - /var/lib/docker/containers:/var/lib/docker/containers:ro\n      - ./promtail-config.yml:/etc/promtail/config.yml\n    command: -config.file=/etc/promtail/config.yml\n</code></pre></p>"},{"location":"deployment/homelab/#metrics","title":"Metrics","text":"<p>Streaklet doesn't expose Prometheus metrics yet, but you can monitor: - Container health (Docker metrics) - HTTP response times (via reverse proxy) - Database size: <code>ls -lh ./data/app.db</code></p>"},{"location":"deployment/homelab/#security-considerations","title":"Security Considerations","text":""},{"location":"deployment/homelab/#authentication","title":"Authentication","text":"<p>Important: Streaklet has no built-in authentication. It's designed for trusted networks.</p> <p>For public access, add authentication at the reverse proxy level:</p> <p>nginx with HTTP Basic Auth: <pre><code>location / {\n    auth_basic \"Restricted\";\n    auth_basic_user_file /etc/nginx/.htpasswd;\n    proxy_pass http://streaklet:8080;\n}\n</code></pre></p> <p>Generate password file: <pre><code>htpasswd -c /etc/nginx/.htpasswd username\n</code></pre></p> <p>Traefik with Authelia: <pre><code>labels:\n  - \"traefik.http.routers.streaklet.middlewares=authelia@docker\"\n</code></pre></p> <p>nginx Proxy Manager with Access List: - Create Access List with credentials - Apply to Streaklet proxy host</p>"},{"location":"deployment/homelab/#firewall","title":"Firewall","text":"<p>Block direct access to port 8080: <pre><code># Allow only from reverse proxy\niptables -A INPUT -p tcp --dport 8080 -s 172.18.0.0/16 -j ACCEPT\niptables -A INPUT -p tcp --dport 8080 -j DROP\n</code></pre></p>"},{"location":"deployment/homelab/#docker-security","title":"Docker Security","text":"<p>Run with additional security: <pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    security_opt:\n      - no-new-privileges:true\n    cap_drop:\n      - ALL\n    read_only: true\n    tmpfs:\n      - /tmp\n</code></pre></p>"},{"location":"deployment/homelab/#backup-strategies","title":"Backup Strategies","text":""},{"location":"deployment/homelab/#automated-backups-with-restic","title":"Automated Backups with Restic","text":"<pre><code># Install Restic\napt install restic\n\n# Initialize repository\nrestic init --repo /mnt/backup/streaklet\n\n# Backup script\n#!/bin/bash\ndocker compose -f /opt/streaklet/docker-compose.yml stop\nrestic backup /opt/streaklet/data --repo /mnt/backup/streaklet\ndocker compose -f /opt/streaklet/docker-compose.yml start\n\n# Add to crontab (daily at 3 AM)\n0 3 * * * /opt/scripts/backup-streaklet.sh\n</code></pre>"},{"location":"deployment/homelab/#backup-to-nas","title":"Backup to NAS","text":"<pre><code>services:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    volumes:\n      - /mnt/nas/streaklet:/data  # Direct NAS mount\n</code></pre> <p>Or use scheduled copy: <pre><code># Backup to NAS via cron\n0 2 * * * rsync -avz /opt/streaklet/data/ /mnt/nas/streaklet-backup/\n</code></pre></p>"},{"location":"deployment/homelab/#complete-homelab-example","title":"Complete Homelab Example","text":"<p>docker-compose.yml with Traefik, monitoring, and backups:</p> <pre><code>version: '3.8'\n\nservices:\n  streaklet:\n    image: ghcr.io/ptmetcalf/streaklet:latest\n    container_name: streaklet\n    restart: unless-stopped\n    networks:\n      - traefik\n    volumes:\n      - ./data:/data\n    environment:\n      - APP_TIMEZONE=America/Chicago\n      - FITBIT_CLIENT_ID=${FITBIT_CLIENT_ID}\n      - FITBIT_CLIENT_SECRET=${FITBIT_CLIENT_SECRET}\n      - APP_SECRET_KEY=${APP_SECRET_KEY}\n    labels:\n      # Traefik\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.streaklet.rule=Host(`streaklet.home.arpa`)\"\n      - \"traefik.http.routers.streaklet.entrypoints=websecure\"\n      - \"traefik.http.routers.streaklet.tls=true\"\n      - \"traefik.http.services.streaklet.loadbalancer.server.port=8080\"\n      # Authelia auth\n      - \"traefik.http.routers.streaklet.middlewares=authelia@docker\"\n      # Metadata\n      - \"com.centurylinklabs.watchtower.enable=true\"\n    healthcheck:\n      test: [\"CMD\", \"python\", \"-c\", \"import urllib.request; urllib.request.urlopen('http://localhost:8080/health')\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    security_opt:\n      - no-new-privileges:true\n    cap_drop:\n      - ALL\n\nnetworks:\n  traefik:\n    external: true\n</code></pre>"},{"location":"deployment/homelab/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/homelab/#cant-access-through-reverse-proxy","title":"Can't access through reverse proxy","text":"<ol> <li>Check container is running: <code>docker ps</code></li> <li>Verify network: <code>docker network inspect traefik</code></li> <li>Test direct access: <code>curl http://container-ip:8080/health</code></li> <li>Check reverse proxy logs</li> </ol>"},{"location":"deployment/homelab/#ssl-certificate-issues","title":"SSL certificate issues","text":"<ol> <li>Verify DNS resolves: <code>nslookup streaklet.yourdomain.com</code></li> <li>Check port 80/443 are open: <code>telnet your-ip 443</code></li> <li>Review certificate logs in reverse proxy</li> <li>Ensure firewall allows HTTP-01 challenge (Let's Encrypt)</li> </ol>"},{"location":"deployment/homelab/#performance-issues","title":"Performance issues","text":"<ol> <li>Check resource usage: <code>docker stats streaklet</code></li> <li>Monitor reverse proxy overhead</li> <li>Enable caching in reverse proxy</li> <li>Consider adding Redis cache (future feature)</li> </ol>"},{"location":"deployment/homelab/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Environment variables</li> <li>Backup &amp; Restore - Data protection</li> <li>Docker Compose - Deployment details</li> </ul>"},{"location":"development/architecture/","title":"Architecture","text":"<p>Understanding Streaklet's codebase structure and design patterns.</p>"},{"location":"development/architecture/#tech-stack","title":"Tech Stack","text":"<ul> <li>Backend: Python 3.12, FastAPI</li> <li>Database: SQLite with SQLAlchemy 2.0 ORM</li> <li>Frontend: Jinja2 templates, Alpine.js, HTMX</li> <li>Deployment: Docker, Docker Compose</li> </ul>"},{"location":"development/architecture/#project-structure","title":"Project Structure","text":"<pre><code>streaklet/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 api/                 # API route handlers\n\u2502   \u2502   \u251c\u2500\u2500 routes_backup.py\n\u2502   \u2502   \u251c\u2500\u2500 routes_days.py\n\u2502   \u2502   \u251c\u2500\u2500 routes_fitbit.py\n\u2502   \u2502   \u251c\u2500\u2500 routes_history.py\n\u2502   \u2502   \u251c\u2500\u2500 routes_profiles.py\n\u2502   \u2502   \u251c\u2500\u2500 routes_streaks.py\n\u2502   \u2502   \u2514\u2500\u2500 routes_tasks.py\n\u2502   \u251c\u2500\u2500 core/                # Core utilities\n\u2502   \u2502   \u251c\u2500\u2500 profile_context.py   # Profile dependency injection\n\u2502   \u2502   \u2514\u2500\u2500 time.py             # Timezone-aware date/time\n\u2502   \u251c\u2500\u2500 models/              # SQLAlchemy models\n\u2502   \u2502   \u251c\u2500\u2500 daily_status.py\n\u2502   \u2502   \u251c\u2500\u2500 fitbit_connection.py\n\u2502   \u2502   \u251c\u2500\u2500 fitbit_metrics.py\n\u2502   \u2502   \u251c\u2500\u2500 profile.py\n\u2502   \u2502   \u251c\u2500\u2500 task.py\n\u2502   \u2502   \u2514\u2500\u2500 task_check.py\n\u2502   \u251c\u2500\u2500 schemas/             # Pydantic schemas\n\u2502   \u2502   \u251c\u2500\u2500 backup.py\n\u2502   \u2502   \u251c\u2500\u2500 fitbit.py\n\u2502   \u2502   \u251c\u2500\u2500 profile.py\n\u2502   \u2502   \u2514\u2500\u2500 task.py\n\u2502   \u251c\u2500\u2500 services/            # Business logic\n\u2502   \u2502   \u251c\u2500\u2500 backup.py\n\u2502   \u2502   \u251c\u2500\u2500 checks.py\n\u2502   \u2502   \u251c\u2500\u2500 days.py\n\u2502   \u2502   \u251c\u2500\u2500 fitbit/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 api.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 checks.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 connection.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 encryption.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 oauth.py\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 scheduler.py\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 sync.py\n\u2502   \u2502   \u251c\u2500\u2500 history.py\n\u2502   \u2502   \u251c\u2500\u2500 profiles.py\n\u2502   \u2502   \u251c\u2500\u2500 streaks.py\n\u2502   \u2502   \u2514\u2500\u2500 tasks.py\n\u2502   \u251c\u2500\u2500 web/                 # Web routes and templates\n\u2502   \u2502   \u2514\u2500\u2500 templates/\n\u2502   \u2502       \u251c\u2500\u2500 base.html\n\u2502   \u2502       \u251c\u2500\u2500 index.html\n\u2502   \u2502       \u251c\u2500\u2500 settings.html\n\u2502   \u2502       \u251c\u2500\u2500 fitbit.html\n\u2502   \u2502       \u251c\u2500\u2500 history.html\n\u2502   \u2502       \u2514\u2500\u2500 profiles.html\n\u2502   \u251c\u2500\u2500 database.py          # Database session management\n\u2502   \u251c\u2500\u2500 main.py              # FastAPI app entry point\n\u2502   \u2514\u2500\u2500 startup.py           # Application startup logic\n\u251c\u2500\u2500 migrations/              # Alembic database migrations\n\u2502   \u2514\u2500\u2500 versions/\n\u251c\u2500\u2500 tests/                   # Pytest test suite\n\u251c\u2500\u2500 data/                    # SQLite database (gitignored)\n\u251c\u2500\u2500 docs/                    # MkDocs documentation\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 mkdocs.yml\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"development/architecture/#architectural-patterns","title":"Architectural Patterns","text":""},{"location":"development/architecture/#1-multi-user-profile-isolation","title":"1. Multi-User Profile Isolation","text":"<p>Core Concept: Every piece of data belongs to a specific profile (user).</p> <p>Implementation Layers:</p> <p>A. Database Level (Foreign Keys) <pre><code># All tables include user_id FK\nclass Task(Base):\n    __tablename__ = \"tasks\"\n    id = Column(Integer, primary_key=True)\n    user_id = Column(Integer, ForeignKey(\"profiles.id\"), nullable=False, index=True)\n    # ... other fields\n</code></pre></p> <p>B. API Level (HTTP Headers) <pre><code># Frontend sends X-Profile-Id with every request\nconst response = await fetchWithProfile('/api/tasks');\n// fetchWithProfile() adds: headers: { 'X-Profile-Id': profileId }\n</code></pre></p> <p>C. Dependency Injection (FastAPI) <pre><code># Extract profile ID from header\ndef get_profile_id(x_profile_id: int | None = Header(default=None)) -&gt; int:\n    return x_profile_id or 1\n\n# Use in routes\n@router.get(\"/api/tasks\")\ndef get_tasks(\n    db: Session = Depends(get_db),\n    profile_id: int = Depends(get_profile_id)  # Injected\n):\n    return task_service.list_tasks(db, profile_id)\n</code></pre></p> <p>D. Service Layer (Data Filtering) <pre><code># All service functions accept profile_id\ndef list_tasks(db: Session, profile_id: int):\n    return db.query(Task).filter(\n        Task.user_id == profile_id  # Always filter by profile\n    ).all()\n</code></pre></p> <p>Key Files: - <code>app/core/profile_context.py</code> - Dependency injection - <code>app/web/templates/base.html</code> - <code>fetchWithProfile()</code> helper - All service functions - Accept <code>profile_id</code> parameter</p>"},{"location":"development/architecture/#2-timezone-aware-date-handling","title":"2. Timezone-Aware Date Handling","text":"<p>Problem: Users in different timezones expect \"today\" to match their local date.</p> <p>Solution: All date operations use configured timezone.</p> <p>Implementation: <pre><code># app/core/time.py\nfrom zoneinfo import ZoneInfo\n\ndef get_timezone() -&gt; ZoneInfo:\n    return ZoneInfo(os.getenv(\"APP_TIMEZONE\", \"America/Chicago\"))\n\ndef get_today() -&gt; date:\n    \"\"\"Returns today's date in configured timezone\"\"\"\n    return datetime.now(get_timezone()).date()\n\ndef get_now() -&gt; datetime:\n    \"\"\"Returns current datetime in configured timezone\"\"\"\n    return datetime.now(get_timezone())\n</code></pre></p> <p>Rule: NEVER use <code>date.today()</code> or <code>datetime.now()</code> directly. Always use helpers.</p> <p>Key Files: - <code>app/core/time.py</code> - Timezone utilities - All services - Use <code>get_today()</code> and <code>get_now()</code></p>"},{"location":"development/architecture/#3-daily-completion-logic","title":"3. Daily Completion Logic","text":"<p>Concept: A day is complete when ALL required active tasks are checked.</p> <p>Flow: 1. User checks/unchecks task \u2192 API call 2. <code>check_service.update_task_check()</code> updates check 3. <code>recompute_daily_completion()</code> automatically called:    - Queries all required active tasks for profile    - Checks if all are completed    - Updates <code>DailyStatus</code> with <code>completed_at</code> timestamp 4. Streak calculation reads <code>DailyStatus</code> for consecutive days</p> <p>Implementation: <pre><code># app/services/checks.py\ndef recompute_daily_completion(\n    db: Session,\n    date: date,\n    profile_id: int\n):\n    \"\"\"Recompute if day is complete based on all required tasks\"\"\"\n    required_tasks = db.query(Task).filter(\n        Task.user_id == profile_id,\n        Task.required == True,\n        Task.active == True\n    ).all()\n\n    if not required_tasks:\n        return\n\n    checks = db.query(TaskCheck).filter(\n        TaskCheck.date == date,\n        TaskCheck.user_id == profile_id\n    ).all()\n\n    checked_task_ids = {c.task_id for c in checks if c.checked}\n    required_task_ids = {t.id for t in required_tasks}\n\n    day_complete = required_task_ids.issubset(checked_task_ids)\n\n    daily_status = get_or_create_daily_status(db, date, profile_id)\n    daily_status.completed_at = get_now() if day_complete else None\n    db.commit()\n</code></pre></p> <p>Key Files: - <code>app/services/checks.py</code> - Completion logic - <code>app/models/daily_status.py</code> - Completion timestamp storage</p>"},{"location":"development/architecture/#4-streak-calculation","title":"4. Streak Calculation","text":"<p>Algorithm: Count consecutive days backward from today (or most recent completion).</p> <p>Rules: - If today is complete, streak includes today - If today is incomplete, streak ends at most recent completion - Break on any day with no completion</p> <p>Implementation: <pre><code># app/services/streaks.py\ndef calculate_current_streak(db: Session, profile_id: int) -&gt; int:\n    today = get_today()\n\n    # Check if today is complete\n    today_status = db.query(DailyStatus).filter(\n        DailyStatus.date == today,\n        DailyStatus.user_id == profile_id,\n        DailyStatus.completed_at.isnot(None)\n    ).first()\n\n    # Start from today or yesterday\n    check_date = today if today_status else today - timedelta(days=1)\n    streak = 0\n\n    # Count backwards\n    while True:\n        status = db.query(DailyStatus).filter(\n            DailyStatus.date == check_date,\n            DailyStatus.user_id == profile_id,\n            DailyStatus.completed_at.isnot(None)\n        ).first()\n\n        if not status:\n            break  # Streak ends\n\n        streak += 1\n        check_date -= timedelta(days=1)\n\n    return streak\n</code></pre></p> <p>Key Files: - <code>app/services/streaks.py</code> - Streak calculation - <code>app/models/daily_status.py</code> - Completion records</p>"},{"location":"development/architecture/#5-fitbit-integration","title":"5. Fitbit Integration","text":"<p>Architecture: OAuth 2.0 \u2192 Token Storage \u2192 Scheduled Sync \u2192 Auto-Complete Tasks</p> <p>Components:</p> <p>A. OAuth Flow (<code>app/services/fitbit/oauth.py</code>) 1. Generate auth URL with state token 2. User authorizes on Fitbit 3. Callback receives code 4. Exchange code for access + refresh tokens 5. Encrypt and store tokens</p> <p>B. Token Encryption (<code>app/services/fitbit/encryption.py</code>) <pre><code>from cryptography.fernet import Fernet\n\ndef encrypt_token(token: str) -&gt; str:\n    key = get_encryption_key()  # From APP_SECRET_KEY\n    f = Fernet(key)\n    return f.encrypt(token.encode()).decode()\n\ndef decrypt_token(encrypted: str) -&gt; str:\n    key = get_encryption_key()\n    f = Fernet(key)\n    return f.decrypt(encrypted.encode()).decode()\n</code></pre></p> <p>C. API Client (<code>app/services/fitbit/api.py</code>) - Fetches activity, sleep, heart rate data - Handles rate limiting (150 requests/hour) - Auto-refreshes expired tokens</p> <p>D. Scheduled Sync (<code>app/services/fitbit/scheduler.py</code>) <pre><code>from apscheduler.schedulers.background import BackgroundScheduler\n\nscheduler = BackgroundScheduler()\nscheduler.add_job(\n    sync_all_profiles_job,\n    'interval',\n    hours=1,  # Sync every hour\n    id='fitbit_sync'\n)\n</code></pre></p> <p>E. Auto-Complete (<code>app/services/fitbit/checks.py</code>) <pre><code>def evaluate_and_apply_auto_checks(db: Session, profile_id: int, date: date):\n    \"\"\"Auto-check tasks based on Fitbit metrics\"\"\"\n    tasks = db.query(Task).filter(\n        Task.user_id == profile_id,\n        Task.fitbit_auto_check == True\n    ).all()\n\n    metrics = get_fitbit_metrics_for_date(db, profile_id, date)\n\n    for task in tasks:\n        if evaluate_goal(metrics, task.fitbit_metric_type,\n                        task.fitbit_goal_operator, task.fitbit_goal_value):\n            # Goal met \u2192 check task\n            update_task_check(db, date, task.id, True, profile_id)\n        else:\n            # Goal not met \u2192 uncheck task\n            update_task_check(db, date, task.id, False, profile_id)\n</code></pre></p> <p>Key Files: - <code>app/services/fitbit/</code> - All Fitbit logic - <code>app/models/fitbit_connection.py</code> - OAuth tokens - <code>app/models/fitbit_metrics.py</code> - Cached metrics</p>"},{"location":"development/architecture/#6-client-side-data-fetching","title":"6. Client-Side Data Fetching","text":"<p>Pattern: Templates render skeleton, Alpine.js fetches data via API.</p> <p>Implementation: <pre><code>&lt;!-- app/web/templates/index.html --&gt;\n&lt;div x-data=\"dailyView\" x-init=\"await loadData()\"&gt;\n    &lt;template x-if=\"loading\"&gt;\n        &lt;p&gt;Loading...&lt;/p&gt;\n    &lt;/template&gt;\n\n    &lt;template x-if=\"!loading\"&gt;\n        &lt;div x-for=\"task in tasks\" :key=\"task.id\"&gt;\n            &lt;span x-text=\"task.title\"&gt;&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\ndocument.addEventListener('alpine:init', () =&gt; {\n    Alpine.data('dailyView', () =&gt; ({\n        tasks: [],\n        loading: true,\n\n        async loadData() {\n            const response = await fetchWithProfile('/api/tasks');\n            this.tasks = await response.json();\n            this.loading = false;\n        }\n    }));\n});\n&lt;/script&gt;\n</code></pre></p> <p>Benefits: - Separation of concerns (templates \u2260 data) - Profile switching without page reload - Progressive enhancement - API-first design</p> <p>Key Files: - <code>app/web/templates/base.html</code> - Alpine.js setup + helpers - All templates - Use <code>x-data</code> + <code>x-init=\"loadData()\"</code></p>"},{"location":"development/architecture/#database-schema","title":"Database Schema","text":""},{"location":"development/architecture/#core-tables","title":"Core Tables","text":"<p>profiles <pre><code>CREATE TABLE profiles (\n    id INTEGER PRIMARY KEY,\n    name TEXT NOT NULL UNIQUE,\n    color TEXT NOT NULL\n);\n</code></pre></p> <p>tasks <pre><code>CREATE TABLE tasks (\n    id INTEGER PRIMARY KEY,\n    user_id INTEGER NOT NULL,  -- FK to profiles\n    title TEXT NOT NULL,\n    description TEXT,\n    required BOOLEAN DEFAULT TRUE,\n    active BOOLEAN DEFAULT TRUE,\n    fitbit_auto_check BOOLEAN DEFAULT FALSE,\n    fitbit_metric_type TEXT,\n    fitbit_goal_operator TEXT,\n    fitbit_goal_value REAL,\n    FOREIGN KEY (user_id) REFERENCES profiles(id) ON DELETE CASCADE\n);\n</code></pre></p> <p>task_checks <pre><code>CREATE TABLE task_checks (\n    id INTEGER PRIMARY KEY,\n    task_id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    date DATE NOT NULL,\n    checked BOOLEAN DEFAULT FALSE,\n    FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE,\n    FOREIGN KEY (user_id) REFERENCES profiles(id) ON DELETE CASCADE,\n    UNIQUE (task_id, date, user_id)\n);\n</code></pre></p> <p>daily_status <pre><code>CREATE TABLE daily_status (\n    date DATE NOT NULL,\n    user_id INTEGER NOT NULL,\n    completed_at TIMESTAMP,\n    PRIMARY KEY (date, user_id),\n    FOREIGN KEY (user_id) REFERENCES profiles(id) ON DELETE CASCADE\n);\n</code></pre></p>"},{"location":"development/architecture/#relationships","title":"Relationships","text":"<ul> <li><code>Profile</code> \u2192 <code>Tasks</code> (one-to-many)</li> <li><code>Task</code> \u2192 <code>TaskChecks</code> (one-to-many)</li> <li><code>Profile</code> \u2192 <code>DailyStatus</code> (one-to-many)</li> <li><code>Profile</code> \u2192 <code>FitbitConnection</code> (one-to-one)</li> <li><code>Profile</code> \u2192 <code>FitbitMetrics</code> (one-to-many)</li> </ul>"},{"location":"development/architecture/#api-design","title":"API Design","text":""},{"location":"development/architecture/#restful-conventions","title":"RESTful Conventions","text":"<ul> <li><code>GET /api/resources</code> - List</li> <li><code>GET /api/resources/:id</code> - Get single</li> <li><code>POST /api/resources</code> - Create</li> <li><code>PUT /api/resources/:id</code> - Update</li> <li><code>DELETE /api/resources/:id</code> - Delete</li> </ul>"},{"location":"development/architecture/#profile-context","title":"Profile Context","text":"<p>All endpoints accept <code>X-Profile-Id</code> header: <pre><code>curl -H \"X-Profile-Id: 2\" http://localhost:8080/api/tasks\n</code></pre></p> <p>Defaults to profile 1 if omitted.</p>"},{"location":"development/architecture/#response-format","title":"Response Format","text":"<p>Success: <pre><code>{\n  \"id\": 1,\n  \"title\": \"Task name\"\n}\n</code></pre></p> <p>Error: <pre><code>{\n  \"detail\": \"Error message\"\n}\n</code></pre></p>"},{"location":"development/architecture/#testing-strategy","title":"Testing Strategy","text":""},{"location":"development/architecture/#test-structure","title":"Test Structure","text":"<pre><code>tests/\n\u251c\u2500\u2500 test_backup.py       # Backup/restore\n\u251c\u2500\u2500 test_daily_checks.py # Check logic\n\u251c\u2500\u2500 test_days.py         # Daily API\n\u251c\u2500\u2500 test_fitbit_*.py     # Fitbit (oauth, api, sync, etc.)\n\u251c\u2500\u2500 test_history.py      # Calendar/history\n\u251c\u2500\u2500 test_profiles.py     # Profiles\n\u251c\u2500\u2500 test_streaks.py      # Streak calculation\n\u251c\u2500\u2500 test_tasks.py        # Tasks\n\u2514\u2500\u2500 conftest.py          # Fixtures\n</code></pre>"},{"location":"development/architecture/#fixtures","title":"Fixtures","text":"<p>Critical: <code>sample_profiles</code> must be created before other fixtures.</p> <pre><code># conftest.py\n@pytest.fixture\ndef sample_profiles(test_db):\n    \"\"\"Create profiles first - required for all other fixtures\"\"\"\n    profiles = [\n        Profile(id=1, name=\"Test User\", color=\"#3b82f6\"),\n        Profile(id=2, name=\"Another User\", color=\"#10b981\")\n    ]\n    test_db.add_all(profiles)\n    test_db.commit()\n    return profiles\n\n@pytest.fixture\ndef sample_tasks(test_db, sample_profiles):  # Depends on sample_profiles\n    tasks = [Task(user_id=1, title=\"Task 1\", ...)]\n    test_db.add_all(tasks)\n    test_db.commit()\n    return tasks\n</code></pre>"},{"location":"development/architecture/#test-patterns","title":"Test Patterns","text":"<p>Service tests: <pre><code>def test_create_task(test_db, sample_profiles):\n    task = task_service.create_task(\n        test_db,\n        profile_id=1,\n        title=\"New Task\",\n        required=True\n    )\n    assert task.id is not None\n    assert task.user_id == 1\n</code></pre></p> <p>API tests: <pre><code>def test_api_create_task(client, sample_profiles):\n    response = client.post(\n        \"/api/tasks\",\n        headers={\"X-Profile-Id\": \"1\"},\n        json={\"title\": \"New Task\", \"required\": True}\n    )\n    assert response.status_code == 200\n</code></pre></p>"},{"location":"development/architecture/#deployment","title":"Deployment","text":""},{"location":"development/architecture/#docker-multi-stage-build","title":"Docker Multi-Stage Build","text":"<p>Stage 1: Builder - Install build dependencies (gcc) - Install Python packages</p> <p>Stage 2: Runtime - Copy packages from builder - No build tools (smaller, more secure) - Run as non-root user (uid 1000)</p> <p>Security Features: - Non-root execution - Minimal attack surface - Health checks - No unnecessary packages</p>"},{"location":"development/architecture/#environment-variables","title":"Environment Variables","text":"<p>See Configuration for full reference.</p>"},{"location":"development/architecture/#performance-considerations","title":"Performance Considerations","text":""},{"location":"development/architecture/#sqlite-optimization","title":"SQLite Optimization","text":"<ul> <li>Indexed foreign keys (<code>user_id</code>)</li> <li>Composite primary keys where appropriate</li> <li>WAL mode enabled (better concurrency)</li> </ul>"},{"location":"development/architecture/#caching","title":"Caching","text":"<ul> <li>Service worker caches static assets</li> <li>Browser localStorage for profile selection</li> <li>Fitbit metrics cached in database</li> </ul>"},{"location":"development/architecture/#scalability-limits","title":"Scalability Limits","text":"<p>SQLite is suitable for: - Families/households (&lt; 10 users) - &lt; 100,000 records - Single-server deployment</p> <p>For larger deployments, consider PostgreSQL migration (future feature).</p>"},{"location":"development/architecture/#security","title":"Security","text":""},{"location":"development/architecture/#authentication","title":"Authentication","text":"<p>None built-in - Designed for trusted networks.</p> <p>Add authentication at reverse proxy level for public access.</p>"},{"location":"development/architecture/#token-encryption","title":"Token Encryption","text":"<p>Fitbit tokens encrypted with AES-256 using <code>APP_SECRET_KEY</code>.</p>"},{"location":"development/architecture/#sql-injection","title":"SQL Injection","text":"<p>Protected by SQLAlchemy ORM parameterized queries.</p>"},{"location":"development/architecture/#xss-protection","title":"XSS Protection","text":"<ul> <li>Jinja2 auto-escapes templates</li> <li>Alpine.js uses safe DOM manipulation</li> </ul>"},{"location":"development/architecture/#future-architecture-considerations","title":"Future Architecture Considerations","text":""},{"location":"development/architecture/#planned-features","title":"Planned Features","text":"<ul> <li>Multi-database support: PostgreSQL option</li> <li>Real-time updates: WebSockets for live sync</li> <li>Mobile apps: React Native or Flutter</li> <li>Plugin system: Custom integrations</li> <li>Export formats: CSV, PDF reports</li> </ul>"},{"location":"development/architecture/#technical-debt","title":"Technical Debt","text":"<ul> <li>No caching layer: Consider Redis for scaling</li> <li>No job queue: Consider Celery for background tasks</li> <li>Timezone per profile: Currently global timezone</li> <li>API versioning: No version prefix yet</li> </ul>"},{"location":"development/architecture/#contributing","title":"Contributing","text":"<p>See Contributing Guide for: - Code style guidelines - Commit conventions - PR process - Testing requirements</p>"},{"location":"development/architecture/#learn-more","title":"Learn More","text":"<ul> <li>Local Setup - Development environment</li> <li>API Reference - Complete API docs</li> <li>Contributing - How to contribute</li> </ul>"},{"location":"development/contributing/","title":"Contributing","text":"<p>Thank you for contributing to Streaklet! This guide will help you get started.</p>"},{"location":"development/contributing/#commit-message-format","title":"Commit Message Format","text":"<p>This project uses Conventional Commits for automated releases.</p>"},{"location":"development/contributing/#format","title":"Format","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre>"},{"location":"development/contributing/#types","title":"Types","text":"Type Description Version Bump <code>feat</code> New feature Minor (1.0.0 \u2192 1.1.0) <code>fix</code> Bug fix Patch (1.0.0 \u2192 1.0.1) <code>feat!</code> or <code>BREAKING CHANGE:</code> Breaking change Major (1.0.0 \u2192 2.0.0) <code>docs</code> Documentation only None <code>chore</code> Maintenance tasks None <code>refactor</code> Code restructuring None <code>test</code> Test additions/changes None <code>ci</code> CI/CD changes None <code>perf</code> Performance improvement Patch"},{"location":"development/contributing/#examples","title":"Examples","text":"<pre><code># Feature (minor bump)\nfeat: add dark mode toggle to settings\n\n# Bug fix (patch bump)\nfix: resolve timezone display issue in Fitbit page\n\n# Breaking change (major bump)\nfeat!: redesign API authentication\n\nBREAKING CHANGE: API now requires JWT tokens instead of API keys\n\n# Documentation (no release)\ndocs: update installation instructions\n\n# Maintenance (no release)\nchore: update dependencies\n</code></pre>"},{"location":"development/contributing/#development-setup","title":"Development Setup","text":""},{"location":"development/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12+</li> <li>Docker and Docker Compose</li> <li>Git</li> </ul>"},{"location":"development/contributing/#local-development","title":"Local Development","text":"<ol> <li>Clone and setup:</li> </ol> <pre><code>git clone https://github.com/ptmetcalf/streaklet.git\ncd streaklet\n\n# Create virtual environment\npython3 -m venv .venv\nsource .venv/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\n</code></pre> <ol> <li>Run locally:</li> </ol> <pre><code># Start development server\n./dev.sh run\n\n# Or with uvicorn directly\nuvicorn app.main:app --reload --host 0.0.0.0 --port 8080\n</code></pre> <ol> <li>Run tests:</li> </ol> <pre><code># All tests\n./dev.sh test\n\n# With coverage\n./dev.sh test-cov\n\n# Single test file\npython -m pytest tests/test_profiles.py -v\n</code></pre> <ol> <li>Lint code:</li> </ol> <pre><code># Activate venv first\nsource .venv/bin/activate\n\n# Check for errors\nruff check app/ tests/\n\n# Auto-fix\nruff check app/ tests/ --fix\n</code></pre>"},{"location":"development/contributing/#docker-development","title":"Docker Development","text":"<pre><code># Build and run\ndocker compose up --build\n\n# Run tests in Docker\ndocker build -t streaklet:test .\ndocker run --rm --entrypoint \"\" --user appuser streaklet:test \\\n  sh -c \"PYTHONPATH=. python -m pytest tests/ -v\"\n</code></pre>"},{"location":"development/contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Create a feature branch:</li> </ol> <pre><code>git checkout -b feat/your-feature-name\n</code></pre> <ol> <li>Make changes with conventional commits:</li> </ol> <pre><code>git add .\ngit commit -m \"feat: add user export functionality\"\ngit push origin feat/your-feature-name\n</code></pre> <ol> <li>Open Pull Request:</li> <li>Target the <code>main</code> or <code>develop</code> branch</li> <li>Use conventional commit format in PR title</li> <li>Describe changes clearly</li> <li> <p>Link related issues</p> </li> <li> <p>CI must pass:</p> </li> <li>Linting</li> <li>Unit tests</li> <li>Docker build</li> <li> <p>Integration tests</p> </li> <li> <p>Review and merge:</p> </li> <li>Maintainer reviews</li> <li>Merge when approved and CI passes</li> </ol>"},{"location":"development/contributing/#release-process","title":"Release Process","text":"<p>Releases are automated via release-please:</p> <ol> <li>Merge PR to <code>main</code> with conventional commits</li> <li>release-please creates a Release PR automatically</li> <li>Maintainer reviews and merges Release PR</li> <li>GitHub Release created</li> <li>Docker images published</li> </ol> <p>See Releases Documentation for details.</p>"},{"location":"development/contributing/#code-style","title":"Code Style","text":"<ul> <li>Follow PEP 8</li> <li>Use type hints</li> <li>Write docstrings for public functions</li> <li>Keep functions focused and small</li> <li>Write tests for new features</li> </ul>"},{"location":"development/contributing/#testing-guidelines","title":"Testing Guidelines","text":"<ul> <li>Write tests for all new features</li> <li>Maintain or improve code coverage</li> <li>Test edge cases</li> <li>Use pytest fixtures appropriately</li> </ul>"},{"location":"development/contributing/#test-structure","title":"Test Structure","text":"<pre><code>def test_feature_description(test_db, sample_profiles):\n    \"\"\"Test that feature does X when Y happens.\"\"\"\n    # Arrange\n    setup_data(test_db)\n\n    # Act\n    result = function_under_test()\n\n    # Assert\n    assert result == expected\n</code></pre>"},{"location":"development/contributing/#documentation","title":"Documentation","text":"<ul> <li>Update docs/ for user-facing changes</li> <li>Update CLAUDE.md for architecture changes</li> <li>Add docstrings for code documentation</li> <li>Include examples where helpful</li> </ul>"},{"location":"development/contributing/#security","title":"Security","text":"<ul> <li>Run as non-root user (uid 1000)</li> <li>No hardcoded secrets</li> <li>Validate user input</li> <li>Use parameterized SQL queries</li> <li>Follow OWASP security practices</li> </ul>"},{"location":"development/contributing/#questions","title":"Questions?","text":"<ul> <li>Open an issue for bugs or feature requests</li> <li>Discussion tab for questions</li> <li>Check existing issues first</li> </ul>"},{"location":"development/contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>Be respectful and constructive in all interactions.</p>"},{"location":"development/local-setup/","title":"Local Development Setup","text":"<p>Set up Streaklet for local development.</p>"},{"location":"development/local-setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.12+</li> <li>Git</li> <li>pip (Python package manager)</li> <li>Docker (optional, for testing containers)</li> </ul>"},{"location":"development/local-setup/#clone-repository","title":"Clone Repository","text":"<pre><code>git clone https://github.com/ptmetcalf/streaklet.git\ncd streaklet\n</code></pre>"},{"location":"development/local-setup/#virtual-environment-setup","title":"Virtual Environment Setup","text":"<p>Create virtual environment: <pre><code>python3 -m venv .venv\n</code></pre></p> <p>Activate virtual environment: <pre><code># Linux/macOS\nsource .venv/bin/activate\n\n# Windows (PowerShell)\n.venv\\Scripts\\Activate.ps1\n\n# Windows (CMD)\n.venv\\Scripts\\activate.bat\n</code></pre></p> <p>Verify activation: <pre><code>which python  # Should show .venv/bin/python\n</code></pre></p>"},{"location":"development/local-setup/#install-dependencies","title":"Install Dependencies","text":"<pre><code>pip install --upgrade pip\npip install -r requirements.txt\n</code></pre> <p>Development tools: <pre><code>pip install ruff  # Linter\n</code></pre></p>"},{"location":"development/local-setup/#database-setup","title":"Database Setup","text":"<p>Run migrations: <pre><code>alembic upgrade head\n</code></pre></p> <p>This creates <code>data/app.db</code> with the schema.</p> <p>Verify database: <pre><code>ls -lh data/app.db\n</code></pre></p>"},{"location":"development/local-setup/#environment-configuration","title":"Environment Configuration","text":"<p>Create <code>.env</code> file (optional): <pre><code># .env\nAPP_TIMEZONE=America/Chicago\nDB_PATH=data/app.db\nPORT=8080\n\n# Optional: Fitbit integration\n# FITBIT_CLIENT_ID=your_client_id\n# FITBIT_CLIENT_SECRET=your_client_secret\n# APP_SECRET_KEY=your_secure_random_key\n</code></pre></p> <p>Load environment variables: <pre><code>export $(cat .env | xargs)\n</code></pre></p>"},{"location":"development/local-setup/#running-the-development-server","title":"Running the Development Server","text":""},{"location":"development/local-setup/#using-devsh-recommended","title":"Using dev.sh (Recommended)","text":"<pre><code>./dev.sh run\n</code></pre> <p>This starts uvicorn with auto-reload enabled.</p>"},{"location":"development/local-setup/#manual-uvicorn","title":"Manual uvicorn","text":"<pre><code>uvicorn app.main:app --reload --host 0.0.0.0 --port 8080\n</code></pre> <p>Options: - <code>--reload</code> - Auto-restart on code changes - <code>--host 0.0.0.0</code> - Accept connections from any IP - <code>--port 8080</code> - Port to listen on</p>"},{"location":"development/local-setup/#access-the-application","title":"Access the Application","text":"<p>Open browser to: <code>http://localhost:8080</code></p>"},{"location":"development/local-setup/#running-tests","title":"Running Tests","text":""},{"location":"development/local-setup/#all-tests","title":"All Tests","text":"<pre><code>./dev.sh test\n# Or manually:\npython -m pytest tests/ -v\n</code></pre>"},{"location":"development/local-setup/#with-coverage","title":"With Coverage","text":"<pre><code>./dev.sh test-cov\n# Or manually:\npython -m pytest tests/ --cov=app --cov-report=html --cov-report=term\n</code></pre> <p>View HTML coverage report: <pre><code>open htmlcov/index.html  # macOS\nxdg-open htmlcov/index.html  # Linux\nstart htmlcov/index.html  # Windows\n</code></pre></p>"},{"location":"development/local-setup/#single-test-file","title":"Single Test File","text":"<pre><code>python -m pytest tests/test_tasks.py -v\n</code></pre>"},{"location":"development/local-setup/#single-test-function","title":"Single Test Function","text":"<pre><code>python -m pytest tests/test_tasks.py::test_create_task -v\n</code></pre>"},{"location":"development/local-setup/#watch-mode-requires-pytest-watch","title":"Watch Mode (Requires pytest-watch)","text":"<pre><code>pip install pytest-watch\nptw tests/ -- -v\n</code></pre>"},{"location":"development/local-setup/#linting","title":"Linting","text":""},{"location":"development/local-setup/#check-code","title":"Check Code","text":"<pre><code>./dev.sh lint\n# Or manually:\nruff check app/ tests/\n</code></pre>"},{"location":"development/local-setup/#auto-fix-issues","title":"Auto-Fix Issues","text":"<pre><code>ruff check app/ tests/ --fix\n</code></pre>"},{"location":"development/local-setup/#ci-style-check-critical-errors-only","title":"CI-Style Check (Critical Errors Only)","text":"<pre><code>ruff check app/ tests/ --select=E9,F63,F7,F82\n</code></pre> <p>This is what CI runs. Must pass for PRs.</p>"},{"location":"development/local-setup/#database-migrations","title":"Database Migrations","text":""},{"location":"development/local-setup/#create-new-migration","title":"Create New Migration","text":"<pre><code>./dev.sh migrate-new \"description\"\n# Or manually:\nalembic revision --autogenerate -m \"add new column\"\n</code></pre>"},{"location":"development/local-setup/#apply-migrations","title":"Apply Migrations","text":"<pre><code>./dev.sh migrate\n# Or manually:\nalembic upgrade head\n</code></pre>"},{"location":"development/local-setup/#rollback-migration","title":"Rollback Migration","text":"<pre><code>alembic downgrade -1\n</code></pre>"},{"location":"development/local-setup/#view-migration-history","title":"View Migration History","text":"<pre><code>alembic history\n</code></pre>"},{"location":"development/local-setup/#view-current-version","title":"View Current Version","text":"<pre><code>alembic current\n</code></pre>"},{"location":"development/local-setup/#docker-development","title":"Docker Development","text":""},{"location":"development/local-setup/#build-image","title":"Build Image","text":"<pre><code>docker build -t streaklet:dev .\n</code></pre>"},{"location":"development/local-setup/#run-container","title":"Run Container","text":"<pre><code>docker run -d \\\n  --name streaklet-dev \\\n  -p 8080:8080 \\\n  -v ./data:/data \\\n  -e APP_TIMEZONE=America/Chicago \\\n  streaklet:dev\n</code></pre>"},{"location":"development/local-setup/#run-tests-in-docker","title":"Run Tests in Docker","text":"<pre><code>docker build -t streaklet:test .\ndocker run --rm --entrypoint \"\" --user appuser streaklet:test \\\n  sh -c \"PYTHONPATH=. python -m pytest tests/ -v\"\n</code></pre>"},{"location":"development/local-setup/#docker-compose-development","title":"Docker Compose Development","text":"<pre><code>docker compose up --build\n</code></pre> <p>Edit files locally; rebuild when needed: <pre><code>docker compose down\ndocker compose up --build -d\n</code></pre></p>"},{"location":"development/local-setup/#ide-configuration","title":"IDE Configuration","text":""},{"location":"development/local-setup/#vs-code","title":"VS Code","text":"<p>Recommended Extensions: - Python - Pylance - Ruff</p> <p>settings.json: <pre><code>{\n  \"python.defaultInterpreterPath\": \".venv/bin/python\",\n  \"python.linting.enabled\": true,\n  \"python.linting.ruffEnabled\": true,\n  \"python.formatting.provider\": \"none\",\n  \"[python]\": {\n    \"editor.defaultFormatter\": \"charliermarsh.ruff\",\n    \"editor.formatOnSave\": true,\n    \"editor.codeActionsOnSave\": {\n      \"source.fixAll\": true\n    }\n  }\n}\n</code></pre></p>"},{"location":"development/local-setup/#pycharm","title":"PyCharm","text":"<p>Configure interpreter: 1. Settings \u2192 Project \u2192 Python Interpreter 2. Add Interpreter \u2192 Existing environment 3. Select <code>.venv/bin/python</code></p> <p>Enable Ruff: 1. Settings \u2192 Tools \u2192 External Tools 2. Add tool: <code>ruff check $FilePath$</code></p>"},{"location":"development/local-setup/#debugging","title":"Debugging","text":""},{"location":"development/local-setup/#vs-code-debug-configuration","title":"VS Code Debug Configuration","text":"<p>.vscode/launch.json: <pre><code>{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"FastAPI\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"module\": \"uvicorn\",\n      \"args\": [\n        \"app.main:app\",\n        \"--reload\",\n        \"--host\", \"0.0.0.0\",\n        \"--port\", \"8080\"\n      ],\n      \"jinja\": true,\n      \"justMyCode\": true,\n      \"env\": {\n        \"APP_TIMEZONE\": \"America/Chicago\"\n      }\n    },\n    {\n      \"name\": \"Pytest\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"module\": \"pytest\",\n      \"args\": [\n        \"tests/\",\n        \"-v\"\n      ],\n      \"justMyCode\": true\n    }\n  ]\n}\n</code></pre></p>"},{"location":"development/local-setup/#python-debugger-pdb","title":"Python Debugger (pdb)","text":"<p>Add breakpoint in code: <pre><code>import pdb; pdb.set_trace()\n</code></pre></p> <p>Or use built-in <code>breakpoint()</code>: <pre><code>breakpoint()\n</code></pre></p>"},{"location":"development/local-setup/#print-debugging","title":"Print Debugging","text":"<pre><code>import logging\nlogging.basicConfig(level=logging.DEBUG)\n\nlogger = logging.getLogger(__name__)\nlogger.debug(f\"Variable value: {variable}\")\n</code></pre>"},{"location":"development/local-setup/#common-development-tasks","title":"Common Development Tasks","text":""},{"location":"development/local-setup/#reset-database","title":"Reset Database","text":"<pre><code>rm data/app.db\nalembic upgrade head\n</code></pre>"},{"location":"development/local-setup/#seed-test-data","title":"Seed Test Data","text":"<p>Create a seed script (e.g., <code>seed.py</code>): <pre><code>from app.database import SessionLocal\nfrom app.services import profiles, tasks\n\ndb = SessionLocal()\n\n# Create profiles\nprofile = profiles.create_profile(db, name=\"Test User\", color=\"#3b82f6\")\n\n# Create tasks\ntasks.create_task(db, profile_id=profile.id, title=\"Test Task\", required=True, active=True)\n\ndb.close()\n</code></pre></p> <p>Run it: <pre><code>python seed.py\n</code></pre></p>"},{"location":"development/local-setup/#clear-cache","title":"Clear Cache","text":"<pre><code>find . -type d -name __pycache__ -exec rm -rf {} +\nfind . -type f -name \"*.pyc\" -delete\n</code></pre>"},{"location":"development/local-setup/#update-dependencies","title":"Update Dependencies","text":"<pre><code>pip list --outdated\npip install --upgrade package-name\npip freeze &gt; requirements.txt\n</code></pre>"},{"location":"development/local-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/local-setup/#import-errors","title":"Import Errors","text":"<p>Ensure <code>PYTHONPATH</code> is set: <pre><code>export PYTHONPATH=.\npython -m pytest tests/\n</code></pre></p>"},{"location":"development/local-setup/#database-locked","title":"Database Locked","text":"<p>SQLite locks when accessed by multiple processes: <pre><code># Kill all Python processes\npkill -f python\nrm data/app.db-journal  # Remove lock file\n</code></pre></p>"},{"location":"development/local-setup/#port-already-in-use","title":"Port Already in Use","text":"<p>Find process using port 8080: <pre><code># Linux/macOS\nlsof -i :8080\nkill -9 &lt;PID&gt;\n\n# Windows\nnetstat -ano | findstr :8080\ntaskkill /PID &lt;PID&gt; /F\n</code></pre></p>"},{"location":"development/local-setup/#virtual-environment-not-activating","title":"Virtual Environment Not Activating","text":"<p>Recreate it: <pre><code>rm -rf .venv\npython3 -m venv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\n</code></pre></p>"},{"location":"development/local-setup/#tests-failing","title":"Tests Failing","text":"<ol> <li>Check database exists: <code>ls data/app.db</code></li> <li>Run migrations: <code>alembic upgrade head</code></li> <li>Clear pytest cache: <code>rm -rf .pytest_cache</code></li> <li>Check environment variables: <code>env | grep APP_</code></li> </ol>"},{"location":"development/local-setup/#git-workflow","title":"Git Workflow","text":"<p>See Contributing Guide for detailed Git workflow and commit conventions.</p> <p>Quick reference: <pre><code># Create feature branch\ngit checkout -b feature/my-feature\n\n# Make changes, commit with conventional commits\ngit add .\ngit commit -m \"feat: add new feature\"\n\n# Push and create PR\ngit push origin feature/my-feature\n</code></pre></p>"},{"location":"development/local-setup/#next-steps","title":"Next Steps","text":"<ul> <li>Contributing Guide - How to contribute</li> <li>Architecture - Codebase structure</li> <li>API Reference - API documentation</li> </ul>"},{"location":"development/releases/","title":"Release Process","text":"<p>Streaklet uses automated releases via release-please.</p>"},{"location":"development/releases/#how-it-works","title":"How It Works","text":"<ol> <li>Commit with conventional format to <code>main</code> branch</li> <li>release-please creates a Release PR with:</li> <li>Auto-calculated version bump</li> <li>Generated CHANGELOG.md</li> <li>Merge the Release PR</li> <li>GitHub Release created automatically</li> <li>Docker images built and published</li> </ol>"},{"location":"development/releases/#version-bumping","title":"Version Bumping","text":"Commit Type Version Change <code>feat:</code> 1.0.0 \u2192 1.1.0 (minor) <code>fix:</code> 1.0.0 \u2192 1.0.1 (patch) <code>feat!:</code> or <code>BREAKING CHANGE:</code> 1.0.0 \u2192 2.0.0 (major) <code>docs:</code>, <code>chore:</code>, etc. No release"},{"location":"development/releases/#typical-workflow","title":"Typical Workflow","text":""},{"location":"development/releases/#1-make-changes","title":"1. Make Changes","text":"<pre><code>git checkout -b feat/new-feature\n# Make changes\ngit commit -m \"feat: add export functionality\"\ngit push\n</code></pre>"},{"location":"development/releases/#2-create-pr","title":"2. Create PR","text":"<ul> <li>Use conventional commit format in PR title</li> <li>Get review and approval</li> <li>Merge to <code>main</code></li> </ul>"},{"location":"development/releases/#3-wait-for-release-pr","title":"3. Wait for Release PR","text":"<p>After merge, release-please creates a PR like:</p> <p>Title: <code>chore(main): release 1.1.0</code></p> <p>Contents: <pre><code>## 1.1.0 (2025-01-15)\n\n### Features\n\n* add export functionality ([abc1234](link))\n* implement user profiles ([def5678](link))\n\n### Bug Fixes\n\n* resolve timezone issue ([ghi9012](link))\n</code></pre></p>"},{"location":"development/releases/#4-merge-release-pr","title":"4. Merge Release PR","text":"<ul> <li>Review the version number and changelog</li> <li>Merge the Release PR</li> <li>Release happens automatically!</li> </ul>"},{"location":"development/releases/#5-docker-images-published","title":"5. Docker Images Published","text":"<p>Images are tagged and published: - <code>ghcr.io/ptmetcalf/streaklet:1.1.0</code> - <code>ghcr.io/ptmetcalf/streaklet:1.1</code> - <code>ghcr.io/ptmetcalf/streaklet:1</code> - <code>ghcr.io/ptmetcalf/streaklet:latest</code></p>"},{"location":"development/releases/#checking-release-status","title":"Checking Release Status","text":"<ul> <li>Open PRs: Look for <code>chore(main): release X.Y.Z</code></li> <li>Releases: GitHub Releases</li> <li>Docker Images: Container Registry</li> <li>Workflows: GitHub Actions</li> </ul>"},{"location":"development/releases/#emergency-manual-release","title":"Emergency Manual Release","text":"<p>If automated releases fail:</p> <pre><code># Create tag manually\ngit tag -a v1.2.3 -m \"Emergency release\"\ngit push origin v1.2.3\n\n# Manually create GitHub Release in UI\n</code></pre>"},{"location":"development/releases/#configuration-files","title":"Configuration Files","text":"<ul> <li><code>.release-please-manifest.json</code> - Current version</li> <li><code>release-please-config.json</code> - Settings</li> <li><code>.github/workflows/release-please.yml</code> - Workflow</li> </ul>"},{"location":"development/releases/#for-detailed-information","title":"For Detailed Information","text":"<p>See RELEASING.md for comprehensive release documentation.</p>"},{"location":"features/backup/","title":"Backup &amp; Restore","text":"<p>Streaklet provides built-in backup and restore functionality to safeguard your habit tracking data.</p>"},{"location":"features/backup/#overview","title":"Overview","text":"<p>Backup features:</p> <ul> <li>Export profile data - JSON format for easy portability</li> <li>Import data - Restore or merge backups</li> <li>Multiple profiles - Export all or specific profiles</li> <li>Complete history - Includes tasks, completions, and settings</li> </ul>"},{"location":"features/backup/#exporting-data","title":"Exporting Data","text":""},{"location":"features/backup/#via-web-interface","title":"Via Web Interface","text":"<ol> <li>Navigate to Settings</li> <li>Scroll to Backup &amp; Restore section</li> <li>Click \"Export Profile Data\"</li> <li>A JSON file will download: <code>streaklet-backup-YYYY-MM-DD.json</code></li> </ol>"},{"location":"features/backup/#via-api","title":"Via API","text":"<p>Export single profile: <pre><code>curl -H \"X-Profile-Id: 1\" \\\n  http://localhost:8080/api/backup/profile/1 \\\n  &gt; profile-1-backup.json\n</code></pre></p> <p>Export all profiles: <pre><code>curl http://localhost:8080/api/backup/all \\\n  &gt; all-profiles-backup.json\n</code></pre></p>"},{"location":"features/backup/#backup-contents","title":"Backup Contents","text":"<p>A backup JSON file contains:</p> <pre><code>{\n  \"version\": \"1.0\",\n  \"exported_at\": \"2025-12-25T10:30:00Z\",\n  \"profiles\": [\n    {\n      \"profile\": {\n        \"name\": \"Mom\",\n        \"color\": \"#3b82f6\"\n      },\n      \"tasks\": [\n        {\n          \"title\": \"Morning run\",\n          \"description\": \"30 minute jog\",\n          \"required\": true,\n          \"active\": true,\n          \"fitbit_auto_check\": false\n        }\n      ],\n      \"task_checks\": [\n        {\n          \"task_title\": \"Morning run\",\n          \"date\": \"2025-12-20\",\n          \"checked\": true\n        }\n      ],\n      \"daily_status\": [\n        {\n          \"date\": \"2025-12-20\",\n          \"completed_at\": \"2025-12-20T19:45:00Z\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"features/backup/#importing-data","title":"Importing Data","text":""},{"location":"features/backup/#import-modes","title":"Import Modes","text":"<p>Replace Mode (default): - Deletes existing profile data - Replaces with imported data - Warning: This is destructive!</p> <p>Merge Mode: - Preserves existing data - Adds new items from backup - Skips duplicates (by title/date) - Safer option for restoring partial data</p>"},{"location":"features/backup/#via-web-interface_1","title":"Via Web Interface","text":"<ol> <li>Navigate to Settings</li> <li>Scroll to Backup &amp; Restore section</li> <li>Click \"Import Profile Data\"</li> <li>Select your backup JSON file</li> <li>Choose Replace or Merge mode</li> <li>Click Import</li> </ol>"},{"location":"features/backup/#via-api_1","title":"Via API","text":"<p>Replace mode: <pre><code>curl -X POST \\\n  -H \"X-Profile-Id: 1\" \\\n  -H \"Content-Type: application/json\" \\\n  -d @backup.json \\\n  http://localhost:8080/api/backup/profile/1?mode=replace\n</code></pre></p> <p>Merge mode: <pre><code>curl -X POST \\\n  -H \"X-Profile-Id: 1\" \\\n  -H \"Content-Type: application/json\" \\\n  -d @backup.json \\\n  http://localhost:8080/api/backup/profile/1?mode=merge\n</code></pre></p> <p>Import all profiles: <pre><code>curl -X POST \\\n  -H \"Content-Type: application/json\" \\\n  -d @all-profiles-backup.json \\\n  http://localhost:8080/api/backup/all\n</code></pre></p>"},{"location":"features/backup/#use-cases","title":"Use Cases","text":""},{"location":"features/backup/#regular-backups","title":"Regular Backups","text":"<p>Schedule regular exports to protect against data loss:</p> <pre><code># Cron job: Daily backup at 2 AM\n0 2 * * * curl http://localhost:8080/api/backup/all &gt; /backups/streaklet-$(date +\\%Y-\\%m-\\%d).json\n</code></pre>"},{"location":"features/backup/#migration","title":"Migration","text":"<p>Moving to a new server or device:</p> <ol> <li>Export data from old instance</li> <li>Set up new Streaklet instance</li> <li>Import the backup (replace mode)</li> <li>Verify data integrity</li> </ol>"},{"location":"features/backup/#data-recovery","title":"Data Recovery","text":"<p>If you accidentally delete tasks or profiles:</p> <ol> <li>Export current state (just in case)</li> <li>Import previous backup (merge mode to preserve any new data)</li> <li>Verify restoration</li> </ol>"},{"location":"features/backup/#sharing-data","title":"Sharing Data","text":"<p>Share tasks with another user:</p> <ol> <li>Export your profile</li> <li>Send JSON to another user</li> <li>They import using merge mode</li> <li>Tasks are added without affecting their existing data</li> </ol>"},{"location":"features/backup/#best-practices","title":"Best Practices","text":""},{"location":"features/backup/#backup-schedule","title":"Backup Schedule","text":"<ul> <li>Daily: If actively tracking habits</li> <li>Weekly: For casual use</li> <li>Before major changes: Always backup before:</li> <li>Upgrading Streaklet</li> <li>Deleting profiles</li> <li>Bulk task changes</li> </ul>"},{"location":"features/backup/#backup-storage","title":"Backup Storage","text":"<ul> <li>Keep backups in multiple locations:</li> <li>Local filesystem</li> <li>Cloud storage (Google Drive, Dropbox, etc.)</li> <li>Version control (Git) for change tracking</li> <li>Rotate old backups (keep last 30 days)</li> </ul>"},{"location":"features/backup/#verification","title":"Verification","text":"<p>Periodically verify backups are valid:</p> <pre><code># Check JSON is valid\ncat backup.json | jq . &gt; /dev/null &amp;&amp; echo \"Valid JSON\"\n\n# Check version field exists\ncat backup.json | jq -r .version\n</code></pre>"},{"location":"features/backup/#database-level-backup","title":"Database-Level Backup","text":"<p>For advanced users, you can also backup the SQLite database directly:</p>"},{"location":"features/backup/#stop-container","title":"Stop Container","text":"<pre><code>docker stop streaklet\n</code></pre>"},{"location":"features/backup/#copy-database","title":"Copy Database","text":"<pre><code># Using volume\ndocker cp streaklet:/data/app.db ./backup-app.db\n\n# Or from host volume\ncp ./data/app.db ./backup-app.db\n</code></pre>"},{"location":"features/backup/#restore-database","title":"Restore Database","text":"<pre><code># Stop container first\ndocker stop streaklet\n\n# Replace database\ncp ./backup-app.db ./data/app.db\n\n# Ensure proper ownership (non-root container)\nchown 1000:1000 ./data/app.db\n\n# Start container\ndocker start streaklet\n</code></pre>"},{"location":"features/backup/#database-backup-advantages","title":"Database Backup Advantages","text":"<ul> <li>Complete snapshot: Includes all data and metadata</li> <li>Fast: No JSON processing</li> <li>Reliable: Direct file copy</li> </ul>"},{"location":"features/backup/#database-backup-disadvantages","title":"Database Backup Disadvantages","text":"<ul> <li>Binary format: Not human-readable</li> <li>Version-specific: May not work across Streaklet versions</li> <li>All-or-nothing: Can't selectively restore profiles</li> </ul>"},{"location":"features/backup/#validation","title":"Validation","text":"<p>Backups are validated on import:</p> <ul> <li>Version check: Ensures compatibility</li> <li>Schema validation: Required fields present</li> <li>Data types: Correct types for all values</li> <li>Foreign keys: Tasks referenced in checks exist</li> </ul> <p>Invalid backups are rejected with detailed error messages.</p>"},{"location":"features/backup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/backup/#import-fails-invalid-version","title":"Import fails: \"Invalid version\"","text":"<p>Your backup is from an incompatible Streaklet version. Check release notes for migration instructions.</p>"},{"location":"features/backup/#import-fails-invalid-profile-data","title":"Import fails: \"Invalid profile data\"","text":"<p>The JSON structure is invalid. Verify: - File is valid JSON - Contains required fields: <code>version</code>, <code>profiles</code> - Task titles are unique within each profile</p>"},{"location":"features/backup/#merge-creates-duplicate-tasks","title":"Merge creates duplicate tasks","text":"<p>Tasks are matched by title. Ensure: - Titles are exactly the same (case-sensitive) - No extra whitespace</p>"},{"location":"features/backup/#backup-file-is-huge","title":"Backup file is huge","text":"<p>Large backup files are normal if you have: - Many profiles - Months/years of completion history - Lots of tasks</p> <p>Consider exporting individual profiles or archiving old data.</p>"},{"location":"features/backup/#api-reference","title":"API Reference","text":"<p>See the Backup &amp; Import API documentation for complete endpoint details.</p>"},{"location":"features/fitbit/","title":"Fitbit Integration","text":"<p>Streaklet integrates with Fitbit to automatically complete tasks based on your fitness metrics.</p>"},{"location":"features/fitbit/#overview","title":"Overview","text":"<p>The Fitbit integration allows you to:</p> <ul> <li>Auto-complete tasks based on daily metrics (steps, sleep, heart rate, etc.)</li> <li>View metrics directly in Streaklet</li> <li>Track progress toward fitness goals</li> <li>Historical sync - backfill up to 30 days of data</li> </ul>"},{"location":"features/fitbit/#setup","title":"Setup","text":""},{"location":"features/fitbit/#1-register-a-fitbit-application","title":"1. Register a Fitbit Application","text":"<p>Before connecting Fitbit, you need to register an application with Fitbit:</p> <ol> <li>Go to dev.fitbit.com</li> <li>Click \"Register An App\"</li> <li>Fill in the application details:</li> <li>Application Name: Streaklet (or your preferred name)</li> <li>Description: Personal habit tracker</li> <li>Application Website: <code>http://localhost:8080</code> (or your domain)</li> <li>Organization: Your name</li> <li>Organization Website: <code>http://localhost:8080</code> (or your domain)</li> <li>OAuth 2.0 Application Type: Personal</li> <li>Callback URL: <code>http://localhost:8080/api/fitbit/callback</code> (important!)</li> <li>Default Access Type: Read Only</li> <li>Agree to terms and click Register</li> <li>Note your Client ID and Client Secret</li> </ol>"},{"location":"features/fitbit/#2-configure-streaklet","title":"2. Configure Streaklet","text":"<p>Add your Fitbit credentials to your environment:</p> <p>Docker Compose: <pre><code>environment:\n  - FITBIT_CLIENT_ID=your_client_id_here\n  - FITBIT_CLIENT_SECRET=your_client_secret_here\n  - APP_SECRET_KEY=your_random_32_character_secret\n</code></pre></p> <p>Direct Docker: <pre><code>docker run -d \\\n  -p 8080:8080 \\\n  -v ./data:/data \\\n  -e FITBIT_CLIENT_ID=your_client_id_here \\\n  -e FITBIT_CLIENT_SECRET=your_client_secret_here \\\n  -e APP_SECRET_KEY=your_random_32_character_secret \\\n  ghcr.io/ptmetcalf/streaklet:latest\n</code></pre></p> <p>Important: <code>APP_SECRET_KEY</code> is used to encrypt Fitbit tokens. Use a secure random 32+ character string.</p>"},{"location":"features/fitbit/#3-connect-your-fitbit-account","title":"3. Connect Your Fitbit Account","text":"<ol> <li>Navigate to Settings in Streaklet</li> <li>Click \"Connect Fitbit\" in the Fitbit section</li> <li>Log in to your Fitbit account and authorize Streaklet</li> <li>You'll be redirected back with a success message</li> </ol>"},{"location":"features/fitbit/#auto-completing-tasks","title":"Auto-Completing Tasks","text":"<p>Tasks can be configured to auto-complete when Fitbit metrics meet certain conditions.</p>"},{"location":"features/fitbit/#creating-auto-check-tasks","title":"Creating Auto-Check Tasks","text":"<p>When creating or editing a task, enable Fitbit auto-check:</p> <ol> <li>Check \"Enable Fitbit Auto-Check\"</li> <li>Select a Metric Type:</li> <li><code>steps</code> - Daily step count</li> <li><code>distance</code> - Distance in miles</li> <li><code>floors</code> - Floors climbed</li> <li><code>calories</code> - Calories burned</li> <li><code>active_minutes</code> - Active minutes</li> <li><code>sleep_minutes</code> - Total sleep time</li> <li><code>resting_heart_rate</code> - Resting heart rate (BPM)</li> <li>Choose a Goal Operator:</li> <li><code>&gt;=</code> - Greater than or equal (most common)</li> <li><code>&lt;=</code> - Less than or equal</li> <li><code>==</code> - Exactly equal</li> <li>Set Goal Value (numeric)</li> </ol> <p>Example: \"Walk 10,000 steps\" - Metric: <code>steps</code> - Operator: <code>&gt;=</code> - Goal: <code>10000</code></p>"},{"location":"features/fitbit/#how-auto-check-works","title":"How Auto-Check Works","text":"<ol> <li>Automatic Sync: Streaklet syncs with Fitbit every hour (configurable)</li> <li>Goal Evaluation: When metrics are synced, tasks are evaluated</li> <li>Auto-Complete: If the goal is met, the task is automatically checked</li> <li>Auto-Uncheck: If you fall below the goal, the task is unchecked</li> </ol>"},{"location":"features/fitbit/#manual-sync","title":"Manual Sync","text":"<p>Force a sync at any time:</p> <ul> <li>Click \"Sync Now\" on the Fitbit settings page</li> <li>Or use the API: <code>POST /api/fitbit/sync</code></li> </ul>"},{"location":"features/fitbit/#available-metrics","title":"Available Metrics","text":"Metric Description Example Use Case <code>steps</code> Total steps for the day Walk 10,000 steps <code>distance</code> Miles traveled Walk 5 miles <code>floors</code> Floors climbed Climb 10 floors <code>calories</code> Calories burned Burn 2,500 calories <code>active_minutes</code> Very active + fairly active minutes 30 active minutes <code>sleep_minutes</code> Total sleep time Sleep 7 hours (420 min) <code>resting_heart_rate</code> Resting heart rate Keep RHR under 60 BPM"},{"location":"features/fitbit/#viewing-metrics","title":"Viewing Metrics","text":""},{"location":"features/fitbit/#daily-summary","title":"Daily Summary","text":"<p>On the Fitbit page, view today's metrics:</p> <ul> <li>Current values</li> <li>Progress toward goals</li> <li>Last sync time</li> </ul>"},{"location":"features/fitbit/#historical-data","title":"Historical Data","text":"<p>Sync historical data (up to 30 days) to backfill metrics:</p> <pre><code>curl -X POST http://localhost:8080/api/fitbit/sync?days=30 \\\n  -H \"X-Profile-Id: 1\"\n</code></pre>"},{"location":"features/fitbit/#sync-schedule","title":"Sync Schedule","text":"<p>By default, Fitbit data syncs automatically every hour for all connected profiles.</p> <p>This ensures your tasks auto-complete throughout the day as you reach goals.</p>"},{"location":"features/fitbit/#disconnecting-fitbit","title":"Disconnecting Fitbit","text":"<p>To disconnect your Fitbit account:</p> <ol> <li>Go to Settings \u2192 Fitbit Integration</li> <li>Click \"Disconnect Fitbit\"</li> <li>Confirm the action</li> </ol> <p>Warning: Disconnecting will: - Revoke Streaklet's access to your Fitbit data - Disable auto-check for all tasks (they'll remain as regular tasks) - Preserve historical metric data (not deleted)</p>"},{"location":"features/fitbit/#privacy-security","title":"Privacy &amp; Security","text":"<ul> <li>Token Encryption: Fitbit access tokens are encrypted at rest using AES-256</li> <li>Read-Only Access: Streaklet only requests read permissions</li> <li>Local Storage: All data is stored in your local SQLite database</li> <li>No Sharing: Data is never sent to external servers (except Fitbit API)</li> </ul>"},{"location":"features/fitbit/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/fitbit/#fitbit-connection-not-found","title":"\"Fitbit connection not found\"","text":"<p>Your Fitbit connection may have expired. Reconnect: 1. Go to Settings 2. Click \"Connect Fitbit\" again</p>"},{"location":"features/fitbit/#tasks-not-auto-completing","title":"Tasks not auto-completing","text":"<ol> <li>Verify Fitbit is connected: Check Settings page</li> <li>Force a manual sync: Click \"Sync Now\"</li> <li>Check task configuration: Ensure metric type and goal are correct</li> <li>Check Fitbit data: Verify metrics exist in your Fitbit app</li> </ol>"},{"location":"features/fitbit/#sync-errors","title":"Sync errors","text":"<p>Check Docker logs for detailed error messages: <pre><code>docker logs streaklet\n</code></pre></p> <p>Common issues: - Invalid credentials (check <code>FITBIT_CLIENT_ID</code> and <code>FITBIT_CLIENT_SECRET</code>) - Expired refresh token (reconnect Fitbit) - Rate limiting (Fitbit API has limits; sync will retry)</p>"},{"location":"features/fitbit/#api-reference","title":"API Reference","text":"<p>See the Fitbit API documentation for complete endpoint details.</p>"},{"location":"features/profiles/","title":"User Profiles","text":"<p>Streaklet supports multiple user profiles, allowing families or households to track habits independently while sharing the same installation.</p>"},{"location":"features/profiles/#overview","title":"Overview","text":"<p>Each profile has:</p> <ul> <li>Completely isolated data - tasks, completions, streaks, and history</li> <li>Custom color - for visual identification in the UI</li> <li>Unique name - to distinguish between users</li> </ul>"},{"location":"features/profiles/#creating-profiles","title":"Creating Profiles","text":""},{"location":"features/profiles/#via-web-interface","title":"Via Web Interface","text":"<ol> <li>Navigate to the Profiles page</li> <li>Click \"Add Profile\"</li> <li>Enter a name (e.g., \"Mom\", \"Dad\", \"Alex\")</li> <li>Choose a color for visual identification</li> <li>Click Save</li> </ol>"},{"location":"features/profiles/#via-api","title":"Via API","text":"<pre><code>curl -X POST http://localhost:8080/api/profiles \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Alex\",\n    \"color\": \"#3b82f6\"\n  }'\n</code></pre> <p>Response: <pre><code>{\n  \"id\": 2,\n  \"name\": \"Alex\",\n  \"color\": \"#3b82f6\"\n}\n</code></pre></p>"},{"location":"features/profiles/#default-profile","title":"Default Profile","text":"<p>On first run, Streaklet automatically creates a default profile (ID: 1) named \"Default Profile\".</p> <p>New profiles are automatically seeded with 5 default tasks: - Follow a diet - 30 min workout - Read 10 pages - 20 min hobby time - Drink 8 glasses water</p> <p>You can edit or delete these tasks as needed.</p>"},{"location":"features/profiles/#switching-profiles","title":"Switching Profiles","text":"<p>The active profile is stored in browser localStorage and persists across sessions.</p> <p>To switch profiles: 1. Click the profile selector (typically in the header) 2. Select the desired profile 3. The page reloads with that profile's data</p>"},{"location":"features/profiles/#data-isolation","title":"Data Isolation","text":"<p>Profile isolation is enforced at multiple levels:</p> <ul> <li>Database level - All tables include a <code>user_id</code> foreign key</li> <li>API level - All requests include an <code>X-Profile-Id</code> header</li> <li>Service level - All queries filter by profile ID</li> </ul> <p>This ensures complete data separation between profiles.</p>"},{"location":"features/profiles/#profile-management","title":"Profile Management","text":""},{"location":"features/profiles/#editing-profiles","title":"Editing Profiles","text":"<p>Update a profile's name or color:</p> <pre><code>curl -X PUT http://localhost:8080/api/profiles/2 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"Alexander\",\n    \"color\": \"#8b5cf6\"\n  }'\n</code></pre>"},{"location":"features/profiles/#deleting-profiles","title":"Deleting Profiles","text":"<p>Warning: Deleting a profile permanently removes: - All tasks - All completion history - All daily status records - Fitbit connection (if any)</p> <p>You cannot delete the last remaining profile.</p> <pre><code>curl -X DELETE http://localhost:8080/api/profiles/2\n</code></pre>"},{"location":"features/profiles/#backup-before-deletion","title":"Backup Before Deletion","text":"<p>Always backup profile data before deletion:</p> <pre><code>curl http://localhost:8080/api/backup/profile/2 &gt; profile-backup.json\n</code></pre>"},{"location":"features/profiles/#multi-device-usage","title":"Multi-Device Usage","text":"<p>Since profile selection is stored in browser localStorage:</p> <ul> <li>Each device/browser can be set to a different profile</li> <li>Perfect for shared family computers (each browser = different user)</li> <li>Mobile and desktop can track different profiles</li> </ul>"},{"location":"features/profiles/#api-reference","title":"API Reference","text":"<p>See the Profile Management API documentation for complete endpoint details.</p>"},{"location":"features/pwa/","title":"Progressive Web App (PWA)","text":"<p>Streaklet is a Progressive Web App, meaning you can install it on your device and use it like a native application.</p>"},{"location":"features/pwa/#features","title":"Features","text":"<ul> <li>Installable - Add to home screen on mobile or desktop</li> <li>Offline Support - Service worker caching for offline access</li> <li>App-like Experience - Runs in standalone mode without browser chrome</li> <li>Fast Loading - Cached assets load instantly</li> </ul>"},{"location":"features/pwa/#installing-on-mobile","title":"Installing on Mobile","text":""},{"location":"features/pwa/#ios-iphoneipad","title":"iOS (iPhone/iPad)","text":"<ol> <li>Open Streaklet in Safari</li> <li>Tap the Share button (square with arrow)</li> <li>Scroll down and tap \"Add to Home Screen\"</li> <li>Name it \"Streaklet\" (or your preference)</li> <li>Tap Add</li> </ol> <p>The app icon will appear on your home screen.</p>"},{"location":"features/pwa/#android","title":"Android","text":"<ol> <li>Open Streaklet in Chrome</li> <li>Tap the menu (three dots) in the top-right</li> <li>Tap \"Add to Home screen\" or \"Install app\"</li> <li>Name it \"Streaklet\" (or your preference)</li> <li>Tap Add</li> </ol> <p>The app icon will appear on your home screen or app drawer.</p>"},{"location":"features/pwa/#installing-on-desktop","title":"Installing on Desktop","text":""},{"location":"features/pwa/#chrome-edge-or-brave","title":"Chrome, Edge, or Brave","text":"<ol> <li>Open Streaklet in the browser</li> <li>Look for the install icon (\u2295 or monitor icon) in the address bar</li> <li>Click it and select Install</li> <li>The app will open in a standalone window</li> </ol> <p>Alternatively: - Chrome: Menu \u2192 More Tools \u2192 Create Shortcut \u2192 Check \"Open as window\" - Edge: Menu \u2192 Apps \u2192 Install this site as an app</p>"},{"location":"features/pwa/#firefox","title":"Firefox","text":"<p>Firefox doesn't support PWA installation directly, but you can create a desktop shortcut: 1. Visit Streaklet 2. Click the menu (three bars) 3. Select \"Pin to Taskbar\" or \"Pin to Start\"</p>"},{"location":"features/pwa/#offline-support","title":"Offline Support","text":"<p>Streaklet caches key assets for offline use:</p> <ul> <li>Static files - HTML, CSS, JavaScript</li> <li>Images - Icons, logos</li> <li>Fonts - Typography assets</li> </ul>"},{"location":"features/pwa/#what-works-offline","title":"What Works Offline","text":"<ul> <li>Viewing the interface</li> <li>Navigating between pages</li> <li>Viewing cached data</li> </ul>"},{"location":"features/pwa/#what-requires-internet","title":"What Requires Internet","text":"<ul> <li>Loading new data from the server</li> <li>Syncing Fitbit data</li> <li>Creating/updating tasks</li> <li>Checking off tasks (unless cached)</li> </ul>"},{"location":"features/pwa/#service-worker","title":"Service Worker","text":"<p>The service worker provides offline functionality and caching:</p> <ul> <li>Cache-first strategy - Static assets load from cache</li> <li>Network-first for API - API calls attempt network first, fall back to cache</li> <li>Automatic updates - Service worker updates automatically when new versions are deployed</li> </ul>"},{"location":"features/pwa/#clearing-cache","title":"Clearing Cache","text":"<p>If you experience issues, clear the cache:</p> <ol> <li>Open browser DevTools (F12)</li> <li>Go to Application \u2192 Storage</li> <li>Click \"Clear site data\"</li> <li>Reload the page</li> </ol>"},{"location":"features/pwa/#app-manifest","title":"App Manifest","text":"<p>Streaklet includes a web app manifest (<code>manifest.json</code>) that defines:</p> <ul> <li>App name and icons</li> <li>Display mode (standalone)</li> <li>Theme colors</li> <li>Start URL</li> </ul>"},{"location":"features/pwa/#customizing","title":"Customizing","text":"<p>You can customize the manifest by editing <code>app/static/manifest.json</code> in your deployment.</p>"},{"location":"features/pwa/#benefits-of-pwa","title":"Benefits of PWA","text":""},{"location":"features/pwa/#mobile-experience","title":"Mobile Experience","text":"<ul> <li>No App Store - Install directly from browser</li> <li>Instant Updates - Always get latest version</li> <li>Less Storage - Smaller than native apps</li> <li>Cross-Platform - Same app on iOS and Android</li> </ul>"},{"location":"features/pwa/#desktop-experience","title":"Desktop Experience","text":"<ul> <li>Quick Access - Launch from desktop or taskbar</li> <li>Distraction-Free - No browser tabs or address bar</li> <li>Native Feel - Looks and behaves like a desktop app</li> </ul>"},{"location":"features/pwa/#browser-support","title":"Browser Support","text":"Feature Chrome Firefox Safari Edge Install \u2705 \u26a0\ufe0f Limited \u2705 \u2705 Offline \u2705 \u2705 \u2705 \u2705 Push Notifications \u2705 \u2705 \u274c \u2705 <p>Note: Streaklet doesn't currently use push notifications.</p>"},{"location":"features/pwa/#uninstalling","title":"Uninstalling","text":""},{"location":"features/pwa/#mobile","title":"Mobile","text":"<p>Uninstall like any other app: - iOS: Long-press the icon \u2192 Remove App - Android: Long-press the icon \u2192 Uninstall or drag to Uninstall</p>"},{"location":"features/pwa/#desktop","title":"Desktop","text":"<ul> <li>Chrome/Edge: Click the app icon in the address bar \u2192 Uninstall</li> <li>Or: OS app settings \u2192 Find \"Streaklet\" \u2192 Uninstall</li> </ul>"},{"location":"features/pwa/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/pwa/#installation-button-not-showing","title":"Installation button not showing","text":"<ul> <li>Ensure you're using HTTPS (or localhost)</li> <li>Clear browser cache and reload</li> <li>Check if already installed (may hide the button)</li> </ul>"},{"location":"features/pwa/#offline-mode-not-working","title":"Offline mode not working","text":"<ul> <li>Check if service worker is registered: DevTools \u2192 Application \u2192 Service Workers</li> <li>Verify cache storage: DevTools \u2192 Application \u2192 Cache Storage</li> <li>Clear cache and reload to re-register service worker</li> </ul>"},{"location":"features/pwa/#app-not-updating","title":"App not updating","text":"<ul> <li>Close all instances of the app</li> <li>Clear cache and reload</li> <li>Uninstall and reinstall the PWA</li> </ul>"},{"location":"features/pwa/#learn-more","title":"Learn More","text":"<ul> <li>Progressive Web Apps (MDN)</li> <li>Service Workers (MDN)</li> <li>Web App Manifest (MDN)</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Streaklet is configured via environment variables.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"getting-started/configuration/#core-settings","title":"Core Settings","text":"Variable Default Description <code>APP_TIMEZONE</code> <code>America/Chicago</code> Timezone for daily tracking (IANA format) <code>DB_PATH</code> <code>/data/app.db</code> Path to SQLite database file <code>PORT</code> <code>8080</code> HTTP server port"},{"location":"getting-started/configuration/#fitbit-integration","title":"Fitbit Integration","text":"Variable Required Description <code>FITBIT_CLIENT_ID</code> Yes* Your Fitbit OAuth client ID <code>FITBIT_CLIENT_SECRET</code> Yes* Your Fitbit OAuth client secret <code>FITBIT_CALLBACK_URL</code> Yes* OAuth callback URL (e.g., <code>http://localhost:8080/api/fitbit/callback</code>) <code>APP_SECRET_KEY</code> Yes* 32-byte secret key for token encryption <code>FITBIT_SYNC_INTERVAL_HOURS</code> <code>1</code> How often to sync Fitbit data (hours) <p>* Required only if using Fitbit integration</p>"},{"location":"getting-started/configuration/#configuration-methods","title":"Configuration Methods","text":""},{"location":"getting-started/configuration/#docker-compose","title":"Docker Compose","text":"<p>Edit <code>.env</code> file:</p> <pre><code>APP_TIMEZONE=America/New_York\nDB_PATH=/data/app.db\nPORT=8080\n\n# Fitbit (optional)\nFITBIT_CLIENT_ID=ABC123\nFITBIT_CLIENT_SECRET=def456xyz\nFITBIT_CALLBACK_URL=http://localhost:8080/api/fitbit/callback\nAPP_SECRET_KEY=your_32_byte_secret_key_here_1234\nFITBIT_SYNC_INTERVAL_HOURS=2\n</code></pre> <p>Then restart: <pre><code>docker compose restart\n</code></pre></p>"},{"location":"getting-started/configuration/#docker-cli","title":"Docker CLI","text":"<p>Pass via <code>-e</code> flags:</p> <pre><code>docker run -d \\\n  -e APP_TIMEZONE=America/New_York \\\n  -e DB_PATH=/data/app.db \\\n  -e FITBIT_CLIENT_ID=ABC123 \\\n  -p 8080:8080 \\\n  ghcr.io/ptmetcalf/streaklet:latest\n</code></pre>"},{"location":"getting-started/configuration/#timezone-configuration","title":"Timezone Configuration","text":"<p>Use IANA timezone names: Full List</p> <p>Common timezones: - <code>America/New_York</code> - Eastern Time - <code>America/Chicago</code> - Central Time - <code>America/Denver</code> - Mountain Time - <code>America/Los_Angeles</code> - Pacific Time - <code>America/Phoenix</code> - Arizona (no DST) - <code>Europe/London</code> - UK - <code>Europe/Paris</code> - Central European Time - <code>Asia/Tokyo</code> - Japan Standard Time - <code>Australia/Sydney</code> - Australian Eastern Time</p>"},{"location":"getting-started/configuration/#fitbit-setup","title":"Fitbit Setup","text":"<p>See the Fitbit Integration Guide for detailed setup instructions.</p>"},{"location":"getting-started/configuration/#generating-app_secret_key","title":"Generating APP_SECRET_KEY","text":"<pre><code># Generate a secure 32-byte key\npython -c \"import secrets; print(secrets.token_urlsafe(32))\"\n</code></pre>"},{"location":"getting-started/configuration/#volume-mounts","title":"Volume Mounts","text":"<p>The <code>/data</code> directory should be mounted to persist: - SQLite database (<code>app.db</code>) - Fitbit tokens (encrypted)</p> <pre><code>docker run -v ./data:/data [...]\n</code></pre>"},{"location":"getting-started/configuration/#port-configuration","title":"Port Configuration","text":"<p>Change the external port if 8080 is in use:</p> <pre><code># Run on port 3000 instead\ndocker run -p 3000:8080 [...]\n</code></pre> <p>The internal port (8080) stays the same.</p>"},{"location":"getting-started/configuration/#security-considerations","title":"Security Considerations","text":"<ul> <li>APP_SECRET_KEY: Keep this secret! Used to encrypt Fitbit tokens</li> <li>Network: Streaklet has no authentication - deploy on trusted networks only</li> <li>Data Directory: Set proper permissions (<code>chown 1000:1000 ./data</code>)</li> <li>Reverse Proxy: Use HTTPS if exposing to internet</li> </ul>"},{"location":"getting-started/configuration/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"getting-started/configuration/#custom-database-path","title":"Custom Database Path","text":"<pre><code>DB_PATH=/custom/path/streaklet.db\n</code></pre> <p>Ensure the directory is writable by uid 1000.</p>"},{"location":"getting-started/configuration/#sync-interval","title":"Sync Interval","text":"<p>Control how often Fitbit data syncs:</p> <pre><code>FITBIT_SYNC_INTERVAL_HOURS=3  # Sync every 3 hours\n</code></pre> <p>Lower values mean more frequent syncs but more API calls.</p>"},{"location":"getting-started/configuration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/configuration/#wrong-timezone","title":"Wrong Timezone","text":"<p>Check your timezone is valid:</p> <pre><code>docker exec streaklet python -c \"from zoneinfo import ZoneInfo; print(ZoneInfo('America/Chicago'))\"\n</code></pre>"},{"location":"getting-started/configuration/#fitbit-not-syncing","title":"Fitbit Not Syncing","text":"<ol> <li>Check <code>FITBIT_SYNC_INTERVAL_HOURS</code> is set</li> <li>View logs: <code>docker logs streaklet</code></li> <li>Manually sync from Settings page</li> </ol>"},{"location":"getting-started/configuration/#permission-errors","title":"Permission Errors","text":"<pre><code>sudo chown -R 1000:1000 ./data\ndocker restart streaklet\n</code></pre>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Streaklet is distributed as a Docker container for easy deployment.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose installed</li> <li>(Optional) Fitbit Developer Application for Fitbit integration</li> </ul>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":"Docker Compose (Recommended)GitHub Container RegistryDocker CLI"},{"location":"getting-started/installation/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/ptmetcalf/streaklet.git\ncd streaklet\n</code></pre>"},{"location":"getting-started/installation/#2-create-environment-file","title":"2. Create Environment File","text":"<pre><code>cp .env.example .env\n</code></pre> <p>Edit <code>.env</code> and configure:</p> <pre><code>APP_TIMEZONE=America/Chicago\nDB_PATH=/data/app.db\nPORT=8080\n\n# For Fitbit integration (optional)\nFITBIT_CLIENT_ID=your_client_id\nFITBIT_CLIENT_SECRET=your_client_secret\nFITBIT_CALLBACK_URL=http://localhost:8080/api/fitbit/callback\nAPP_SECRET_KEY=your_32_byte_secret_key\n</code></pre>"},{"location":"getting-started/installation/#3-start-the-application","title":"3. Start the Application","text":"<pre><code>docker compose up -d\n</code></pre> <p>Access at: <code>http://localhost:8080</code></p>"},{"location":"getting-started/installation/#pull-pre-built-image","title":"Pull Pre-Built Image","text":"<pre><code>docker pull ghcr.io/ptmetcalf/streaklet:latest\n</code></pre>"},{"location":"getting-started/installation/#run-container","title":"Run Container","text":"<pre><code>docker run -d \\\n  --name streaklet \\\n  -p 8080:8080 \\\n  -v ./data:/data \\\n  -e APP_TIMEZONE=America/Chicago \\\n  -e DB_PATH=/data/app.db \\\n  ghcr.io/ptmetcalf/streaklet:latest\n</code></pre>"},{"location":"getting-started/installation/#build-from-source","title":"Build from Source","text":"<pre><code>git clone https://github.com/ptmetcalf/streaklet.git\ncd streaklet\ndocker build -t streaklet .\n</code></pre>"},{"location":"getting-started/installation/#run-container_1","title":"Run Container","text":"<pre><code>docker run -d \\\n  --name streaklet \\\n  -p 8080:8080 \\\n  -v ./data:/data \\\n  -e APP_TIMEZONE=America/Chicago \\\n  -e DB_PATH=/data/app.db \\\n  streaklet\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>Check that the container is healthy:</p> <pre><code>docker ps\ncurl http://localhost:8080/health\n</code></pre> <p>Expected response: <pre><code>{\"status\": \"healthy\"}\n</code></pre></p>"},{"location":"getting-started/installation/#first-launch","title":"First Launch","text":"<ol> <li>Navigate to <code>http://localhost:8080</code></li> <li>You'll be redirected to the Profiles page</li> <li>A default profile is automatically created</li> <li>Start adding tasks and tracking your streaks!</li> </ol>"},{"location":"getting-started/installation/#updating","title":"Updating","text":""},{"location":"getting-started/installation/#docker-compose","title":"Docker Compose","text":"<pre><code>docker compose pull\ndocker compose up -d\n</code></pre>"},{"location":"getting-started/installation/#docker-cli","title":"Docker CLI","text":"<pre><code>docker pull ghcr.io/ptmetcalf/streaklet:latest\ndocker stop streaklet\ndocker rm streaklet\ndocker run -d --name streaklet [... same options as above ...]\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#permission-errors","title":"Permission Errors","text":"<p>If you see \"readonly database\" errors, fix data directory permissions:</p> <pre><code>chown -R 1000:1000 ./data\ndocker restart streaklet\n</code></pre> <p>The hardened Docker image runs as a non-root user (uid 1000) for security.</p>"},{"location":"getting-started/installation/#port-already-in-use","title":"Port Already in Use","text":"<p>Change the port mapping in docker-compose.yml or use a different port:</p> <pre><code>docker run -p 8081:8080 [...]\n</code></pre>"},{"location":"getting-started/installation/#database-migrations-failed","title":"Database Migrations Failed","text":"<p>Manually run migrations:</p> <pre><code>docker exec streaklet alembic upgrade head\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Guide - Environment variables and settings</li> <li>Quick Start Tutorial - Learn the basics</li> <li>Fitbit Setup - Connect your Fitbit device</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start Guide","text":"<p>Get up and running with Streaklet in 5 minutes.</p>"},{"location":"getting-started/quick-start/#1-start-streaklet","title":"1. Start Streaklet","text":"<pre><code>docker run -d -p 8080:8080 -v ./data:/data ghcr.io/ptmetcalf/streaklet:latest\n</code></pre>"},{"location":"getting-started/quick-start/#2-open-in-browser","title":"2. Open in Browser","text":"<p>Navigate to <code>http://localhost:8080</code></p>"},{"location":"getting-started/quick-start/#3-create-your-profile","title":"3. Create Your Profile","text":"<p>You'll be redirected to the Profiles page. A \"Default Profile\" is automatically created.</p> <ul> <li>Click Edit to customize the name and color</li> <li>Or click Add Profile to create additional profiles for family members</li> </ul>"},{"location":"getting-started/quick-start/#4-add-your-tasks","title":"4. Add Your Tasks","text":"<p>Click Settings in the bottom navigation and:</p> <ol> <li>Edit the default tasks or create your own</li> <li>Mark tasks as Required (must complete for streak) or optional</li> <li>Drag to reorder tasks</li> <li>Save changes</li> </ol>"},{"location":"getting-started/quick-start/#5-start-tracking","title":"5. Start Tracking","text":"<p>Click Checklist to return to today's view and start checking off tasks!</p> <ul> <li>Tap tasks to mark them complete</li> <li>See your progress bar fill up</li> <li>Complete all required tasks to continue your streak</li> </ul>"},{"location":"getting-started/quick-start/#understanding-streaks","title":"Understanding Streaks","text":"<ul> <li>Day 1: Complete all required tasks</li> <li>Streak continues: Keep completing all required tasks daily</li> <li>Streak breaks: Miss any required task on any day</li> <li>Today incomplete: Streak shows Day 1 until today is complete</li> </ul>"},{"location":"getting-started/quick-start/#multi-user-setup","title":"Multi-User Setup","text":"<p>Each family member can have their own profile:</p> <ol> <li>Go to Profiles page</li> <li>Click Add Profile</li> <li>Choose name and color</li> <li>Each profile gets independent:</li> <li>Tasks</li> <li>Check history</li> <li>Streak count</li> <li>Calendar</li> </ol>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Enable Fitbit Integration - Auto-complete tasks</li> <li>Install as PWA - Add to home screen</li> <li>Configure Settings - Customize timezone and more</li> </ul>"}]}